import{R as K}from"./index.6otl1p8d.js";var Oe={},ae={},nt;function ai(){if(nt)return ae;nt=1,ae.byteLength=a,ae.toByteArray=m,ae.fromByteArray=S;for(var i=[],e=[],r=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,u=s.length;o<u;++o)i[o]=s[o],e[s.charCodeAt(o)]=o;e[45]=62,e[95]=63;function l(I){var b=I.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=I.indexOf("=");x===-1&&(x=b);var B=x===b?0:4-x%4;return[x,B]}function a(I){var b=l(I),x=b[0],B=b[1];return(x+B)*3/4-B}function d(I,b,x){return(b+x)*3/4-x}function m(I){var b,x=l(I),B=x[0],A=x[1],T=new r(d(I,B,A)),$=0,P=A>0?B-4:B,U;for(U=0;U<P;U+=4)b=e[I.charCodeAt(U)]<<18|e[I.charCodeAt(U+1)]<<12|e[I.charCodeAt(U+2)]<<6|e[I.charCodeAt(U+3)],T[$++]=b>>16&255,T[$++]=b>>8&255,T[$++]=b&255;return A===2&&(b=e[I.charCodeAt(U)]<<2|e[I.charCodeAt(U+1)]>>4,T[$++]=b&255),A===1&&(b=e[I.charCodeAt(U)]<<10|e[I.charCodeAt(U+1)]<<4|e[I.charCodeAt(U+2)]>>2,T[$++]=b>>8&255,T[$++]=b&255),T}function p(I){return i[I>>18&63]+i[I>>12&63]+i[I>>6&63]+i[I&63]}function E(I,b,x){for(var B,A=[],T=b;T<x;T+=3)B=(I[T]<<16&16711680)+(I[T+1]<<8&65280)+(I[T+2]&255),A.push(p(B));return A.join("")}function S(I){for(var b,x=I.length,B=x%3,A=[],T=16383,$=0,P=x-B;$<P;$+=T)A.push(E(I,$,$+T>P?P:$+T));return B===1?(b=I[x-1],A.push(i[b>>2]+i[b<<4&63]+"==")):B===2&&(b=(I[x-2]<<8)+I[x-1],A.push(i[b>>10]+i[b>>4&63]+i[b<<2&63]+"=")),A.join("")}return ae}var pe={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var rt;function ci(){return rt||(rt=1,pe.read=function(i,e,r,s,o){var u,l,a=o*8-s-1,d=(1<<a)-1,m=d>>1,p=-7,E=r?o-1:0,S=r?-1:1,I=i[e+E];for(E+=S,u=I&(1<<-p)-1,I>>=-p,p+=a;p>0;u=u*256+i[e+E],E+=S,p-=8);for(l=u&(1<<-p)-1,u>>=-p,p+=s;p>0;l=l*256+i[e+E],E+=S,p-=8);if(u===0)u=1-m;else{if(u===d)return l?NaN:(I?-1:1)*(1/0);l=l+Math.pow(2,s),u=u-m}return(I?-1:1)*l*Math.pow(2,u-s)},pe.write=function(i,e,r,s,o,u){var l,a,d,m=u*8-o-1,p=(1<<m)-1,E=p>>1,S=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,I=s?0:u-1,b=s?1:-1,x=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,l=p):(l=Math.floor(Math.log(e)/Math.LN2),e*(d=Math.pow(2,-l))<1&&(l--,d*=2),l+E>=1?e+=S/d:e+=S*Math.pow(2,1-E),e*d>=2&&(l++,d/=2),l+E>=p?(a=0,l=p):l+E>=1?(a=(e*d-1)*Math.pow(2,o),l=l+E):(a=e*Math.pow(2,E-1)*Math.pow(2,o),l=0));o>=8;i[r+I]=a&255,I+=b,a/=256,o-=8);for(l=l<<o|a,m+=o;m>0;i[r+I]=l&255,I+=b,l/=256,m-=8);i[r+I-b]|=x*128}),pe}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var st;function ui(){return st||(st=1,function(i){const e=ai(),r=ci(),s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=a,i.SlowBuffer=T,i.INSPECT_MAX_BYTES=50;const o=2147483647;i.kMaxLength=o,a.TYPED_ARRAY_SUPPORT=u(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{const c=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(c,t),c.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function l(c){if(c>o)throw new RangeError('The value "'+c+'" is invalid for option "size"');const t=new Uint8Array(c);return Object.setPrototypeOf(t,a.prototype),t}function a(c,t,n){if(typeof c=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E(c)}return d(c,t,n)}a.poolSize=8192;function d(c,t,n){if(typeof c=="string")return S(c,t);if(ArrayBuffer.isView(c))return b(c);if(c==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c);if(V(c,ArrayBuffer)||c&&V(c.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(V(c,SharedArrayBuffer)||c&&V(c.buffer,SharedArrayBuffer)))return x(c,t,n);if(typeof c=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const h=c.valueOf&&c.valueOf();if(h!=null&&h!==c)return a.from(h,t,n);const f=B(c);if(f)return f;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof c[Symbol.toPrimitive]=="function")return a.from(c[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c)}a.from=function(c,t,n){return d(c,t,n)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function m(c){if(typeof c!="number")throw new TypeError('"size" argument must be of type number');if(c<0)throw new RangeError('The value "'+c+'" is invalid for option "size"')}function p(c,t,n){return m(c),c<=0?l(c):t!==void 0?typeof n=="string"?l(c).fill(t,n):l(c).fill(t):l(c)}a.alloc=function(c,t,n){return p(c,t,n)};function E(c){return m(c),l(c<0?0:A(c)|0)}a.allocUnsafe=function(c){return E(c)},a.allocUnsafeSlow=function(c){return E(c)};function S(c,t){if((typeof t!="string"||t==="")&&(t="utf8"),!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=$(c,t)|0;let h=l(n);const f=h.write(c,t);return f!==n&&(h=h.slice(0,f)),h}function I(c){const t=c.length<0?0:A(c.length)|0,n=l(t);for(let h=0;h<t;h+=1)n[h]=c[h]&255;return n}function b(c){if(V(c,Uint8Array)){const t=new Uint8Array(c);return x(t.buffer,t.byteOffset,t.byteLength)}return I(c)}function x(c,t,n){if(t<0||c.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(c.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let h;return t===void 0&&n===void 0?h=new Uint8Array(c):n===void 0?h=new Uint8Array(c,t):h=new Uint8Array(c,t,n),Object.setPrototypeOf(h,a.prototype),h}function B(c){if(a.isBuffer(c)){const t=A(c.length)|0,n=l(t);return n.length===0||c.copy(n,0,0,t),n}if(c.length!==void 0)return typeof c.length!="number"||Fe(c.length)?l(0):I(c);if(c.type==="Buffer"&&Array.isArray(c.data))return I(c.data)}function A(c){if(c>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return c|0}function T(c){return+c!=c&&(c=0),a.alloc(+c)}a.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==a.prototype},a.compare=function(t,n){if(V(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),V(n,Uint8Array)&&(n=a.from(n,n.offset,n.byteLength)),!a.isBuffer(t)||!a.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===n)return 0;let h=t.length,f=n.length;for(let y=0,g=Math.min(h,f);y<g;++y)if(t[y]!==n[y]){h=t[y],f=n[y];break}return h<f?-1:f<h?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,n){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return a.alloc(0);let h;if(n===void 0)for(n=0,h=0;h<t.length;++h)n+=t[h].length;const f=a.allocUnsafe(n);let y=0;for(h=0;h<t.length;++h){let g=t[h];if(V(g,Uint8Array))y+g.length>f.length?(a.isBuffer(g)||(g=a.from(g)),g.copy(f,y)):Uint8Array.prototype.set.call(f,g,y);else if(a.isBuffer(g))g.copy(f,y);else throw new TypeError('"list" argument must be an Array of Buffers');y+=g.length}return f};function $(c,t){if(a.isBuffer(c))return c.length;if(ArrayBuffer.isView(c)||V(c,ArrayBuffer))return c.byteLength;if(typeof c!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof c);const n=c.length,h=arguments.length>2&&arguments[2]===!0;if(!h&&n===0)return 0;let f=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Ce(c).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return it(c).length;default:if(f)return h?-1:Ce(c).length;t=(""+t).toLowerCase(),f=!0}}a.byteLength=$;function P(c,t,n){let h=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,t>>>=0,n<=t))return"";for(c||(c="utf8");;)switch(c){case"hex":return Qt(this,t,n);case"utf8":case"utf-8":return Ve(this,t,n);case"ascii":return Xt(this,t,n);case"latin1":case"binary":return Yt(this,t,n);case"base64":return Gt(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Zt(this,t,n);default:if(h)throw new TypeError("Unknown encoding: "+c);c=(c+"").toLowerCase(),h=!0}}a.prototype._isBuffer=!0;function U(c,t,n){const h=c[t];c[t]=c[n],c[n]=h}a.prototype.swap16=function(){const t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let n=0;n<t;n+=2)U(this,n,n+1);return this},a.prototype.swap32=function(){const t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let n=0;n<t;n+=4)U(this,n,n+3),U(this,n+1,n+2);return this},a.prototype.swap64=function(){const t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let n=0;n<t;n+=8)U(this,n,n+7),U(this,n+1,n+6),U(this,n+2,n+5),U(this,n+3,n+4);return this},a.prototype.toString=function(){const t=this.length;return t===0?"":arguments.length===0?Ve(this,0,t):P.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:a.compare(this,t)===0},a.prototype.inspect=function(){let t="";const n=i.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},s&&(a.prototype[s]=a.prototype.inspect),a.prototype.compare=function(t,n,h,f,y){if(V(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(n===void 0&&(n=0),h===void 0&&(h=t?t.length:0),f===void 0&&(f=0),y===void 0&&(y=this.length),n<0||h>t.length||f<0||y>this.length)throw new RangeError("out of range index");if(f>=y&&n>=h)return 0;if(f>=y)return-1;if(n>=h)return 1;if(n>>>=0,h>>>=0,f>>>=0,y>>>=0,this===t)return 0;let g=y-f,_=h-n;const O=Math.min(g,_),F=this.slice(f,y),N=t.slice(n,h);for(let C=0;C<O;++C)if(F[C]!==N[C]){g=F[C],_=N[C];break}return g<_?-1:_<g?1:0};function z(c,t,n,h,f){if(c.length===0)return-1;if(typeof n=="string"?(h=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,Fe(n)&&(n=f?0:c.length-1),n<0&&(n=c.length+n),n>=c.length){if(f)return-1;n=c.length-1}else if(n<0)if(f)n=0;else return-1;if(typeof t=="string"&&(t=a.from(t,h)),a.isBuffer(t))return t.length===0?-1:J(c,t,n,h,f);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?f?Uint8Array.prototype.indexOf.call(c,t,n):Uint8Array.prototype.lastIndexOf.call(c,t,n):J(c,[t],n,h,f);throw new TypeError("val must be string, number or Buffer")}function J(c,t,n,h,f){let y=1,g=c.length,_=t.length;if(h!==void 0&&(h=String(h).toLowerCase(),h==="ucs2"||h==="ucs-2"||h==="utf16le"||h==="utf-16le")){if(c.length<2||t.length<2)return-1;y=2,g/=2,_/=2,n/=2}function O(N,C){return y===1?N[C]:N.readUInt16BE(C*y)}let F;if(f){let N=-1;for(F=n;F<g;F++)if(O(c,F)===O(t,N===-1?0:F-N)){if(N===-1&&(N=F),F-N+1===_)return N*y}else N!==-1&&(F-=F-N),N=-1}else for(n+_>g&&(n=g-_),F=n;F>=0;F--){let N=!0;for(let C=0;C<_;C++)if(O(c,F+C)!==O(t,C)){N=!1;break}if(N)return F}return-1}a.prototype.includes=function(t,n,h){return this.indexOf(t,n,h)!==-1},a.prototype.indexOf=function(t,n,h){return z(this,t,n,h,!0)},a.prototype.lastIndexOf=function(t,n,h){return z(this,t,n,h,!1)};function ee(c,t,n,h){n=Number(n)||0;const f=c.length-n;h?(h=Number(h),h>f&&(h=f)):h=f;const y=t.length;h>y/2&&(h=y/2);let g;for(g=0;g<h;++g){const _=parseInt(t.substr(g*2,2),16);if(Fe(_))return g;c[n+g]=_}return g}function fe(c,t,n,h){return de(Ce(t,c.length-n),c,n,h)}function Wt(c,t,n,h){return de(ni(t),c,n,h)}function Jt(c,t,n,h){return de(it(t),c,n,h)}function Vt(c,t,n,h){return de(ri(t,c.length-n),c,n,h)}a.prototype.write=function(t,n,h,f){if(n===void 0)f="utf8",h=this.length,n=0;else if(h===void 0&&typeof n=="string")f=n,h=this.length,n=0;else if(isFinite(n))n=n>>>0,isFinite(h)?(h=h>>>0,f===void 0&&(f="utf8")):(f=h,h=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const y=this.length-n;if((h===void 0||h>y)&&(h=y),t.length>0&&(h<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");f||(f="utf8");let g=!1;for(;;)switch(f){case"hex":return ee(this,t,n,h);case"utf8":case"utf-8":return fe(this,t,n,h);case"ascii":case"latin1":case"binary":return Wt(this,t,n,h);case"base64":return Jt(this,t,n,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Vt(this,t,n,h);default:if(g)throw new TypeError("Unknown encoding: "+f);f=(""+f).toLowerCase(),g=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Gt(c,t,n){return t===0&&n===c.length?e.fromByteArray(c):e.fromByteArray(c.slice(t,n))}function Ve(c,t,n){n=Math.min(c.length,n);const h=[];let f=t;for(;f<n;){const y=c[f];let g=null,_=y>239?4:y>223?3:y>191?2:1;if(f+_<=n){let O,F,N,C;switch(_){case 1:y<128&&(g=y);break;case 2:O=c[f+1],(O&192)===128&&(C=(y&31)<<6|O&63,C>127&&(g=C));break;case 3:O=c[f+1],F=c[f+2],(O&192)===128&&(F&192)===128&&(C=(y&15)<<12|(O&63)<<6|F&63,C>2047&&(C<55296||C>57343)&&(g=C));break;case 4:O=c[f+1],F=c[f+2],N=c[f+3],(O&192)===128&&(F&192)===128&&(N&192)===128&&(C=(y&15)<<18|(O&63)<<12|(F&63)<<6|N&63,C>65535&&C<1114112&&(g=C))}}g===null?(g=65533,_=1):g>65535&&(g-=65536,h.push(g>>>10&1023|55296),g=56320|g&1023),h.push(g),f+=_}return vt(h)}const Ge=4096;function vt(c){const t=c.length;if(t<=Ge)return String.fromCharCode.apply(String,c);let n="",h=0;for(;h<t;)n+=String.fromCharCode.apply(String,c.slice(h,h+=Ge));return n}function Xt(c,t,n){let h="";n=Math.min(c.length,n);for(let f=t;f<n;++f)h+=String.fromCharCode(c[f]&127);return h}function Yt(c,t,n){let h="";n=Math.min(c.length,n);for(let f=t;f<n;++f)h+=String.fromCharCode(c[f]);return h}function Qt(c,t,n){const h=c.length;(!t||t<0)&&(t=0),(!n||n<0||n>h)&&(n=h);let f="";for(let y=t;y<n;++y)f+=si[c[y]];return f}function Zt(c,t,n){const h=c.slice(t,n);let f="";for(let y=0;y<h.length-1;y+=2)f+=String.fromCharCode(h[y]+h[y+1]*256);return f}a.prototype.slice=function(t,n){const h=this.length;t=~~t,n=n===void 0?h:~~n,t<0?(t+=h,t<0&&(t=0)):t>h&&(t=h),n<0?(n+=h,n<0&&(n=0)):n>h&&(n=h),n<t&&(n=t);const f=this.subarray(t,n);return Object.setPrototypeOf(f,a.prototype),f};function k(c,t,n){if(c%1!==0||c<0)throw new RangeError("offset is not uint");if(c+t>n)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(t,n,h){t=t>>>0,n=n>>>0,h||k(t,n,this.length);let f=this[t],y=1,g=0;for(;++g<n&&(y*=256);)f+=this[t+g]*y;return f},a.prototype.readUintBE=a.prototype.readUIntBE=function(t,n,h){t=t>>>0,n=n>>>0,h||k(t,n,this.length);let f=this[t+--n],y=1;for(;n>0&&(y*=256);)f+=this[t+--n]*y;return f},a.prototype.readUint8=a.prototype.readUInt8=function(t,n){return t=t>>>0,n||k(t,1,this.length),this[t]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(t,n){return t=t>>>0,n||k(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(t,n){return t=t>>>0,n||k(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(t,n){return t=t>>>0,n||k(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(t,n){return t=t>>>0,n||k(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readBigUInt64LE=X(function(t){t=t>>>0,ie(t,"offset");const n=this[t],h=this[t+7];(n===void 0||h===void 0)&&oe(t,this.length-8);const f=n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,y=this[++t]+this[++t]*2**8+this[++t]*2**16+h*2**24;return BigInt(f)+(BigInt(y)<<BigInt(32))}),a.prototype.readBigUInt64BE=X(function(t){t=t>>>0,ie(t,"offset");const n=this[t],h=this[t+7];(n===void 0||h===void 0)&&oe(t,this.length-8);const f=n*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],y=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+h;return(BigInt(f)<<BigInt(32))+BigInt(y)}),a.prototype.readIntLE=function(t,n,h){t=t>>>0,n=n>>>0,h||k(t,n,this.length);let f=this[t],y=1,g=0;for(;++g<n&&(y*=256);)f+=this[t+g]*y;return y*=128,f>=y&&(f-=Math.pow(2,8*n)),f},a.prototype.readIntBE=function(t,n,h){t=t>>>0,n=n>>>0,h||k(t,n,this.length);let f=n,y=1,g=this[t+--f];for(;f>0&&(y*=256);)g+=this[t+--f]*y;return y*=128,g>=y&&(g-=Math.pow(2,8*n)),g},a.prototype.readInt8=function(t,n){return t=t>>>0,n||k(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]},a.prototype.readInt16LE=function(t,n){t=t>>>0,n||k(t,2,this.length);const h=this[t]|this[t+1]<<8;return h&32768?h|4294901760:h},a.prototype.readInt16BE=function(t,n){t=t>>>0,n||k(t,2,this.length);const h=this[t+1]|this[t]<<8;return h&32768?h|4294901760:h},a.prototype.readInt32LE=function(t,n){return t=t>>>0,n||k(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,n){return t=t>>>0,n||k(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readBigInt64LE=X(function(t){t=t>>>0,ie(t,"offset");const n=this[t],h=this[t+7];(n===void 0||h===void 0)&&oe(t,this.length-8);const f=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(h<<24);return(BigInt(f)<<BigInt(32))+BigInt(n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)}),a.prototype.readBigInt64BE=X(function(t){t=t>>>0,ie(t,"offset");const n=this[t],h=this[t+7];(n===void 0||h===void 0)&&oe(t,this.length-8);const f=(n<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(f)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+h)}),a.prototype.readFloatLE=function(t,n){return t=t>>>0,n||k(t,4,this.length),r.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,n){return t=t>>>0,n||k(t,4,this.length),r.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,n){return t=t>>>0,n||k(t,8,this.length),r.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,n){return t=t>>>0,n||k(t,8,this.length),r.read(this,t,!1,52,8)};function D(c,t,n,h,f,y){if(!a.isBuffer(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>f||t<y)throw new RangeError('"value" argument is out of bounds');if(n+h>c.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(t,n,h,f){if(t=+t,n=n>>>0,h=h>>>0,!f){const _=Math.pow(2,8*h)-1;D(this,t,n,h,_,0)}let y=1,g=0;for(this[n]=t&255;++g<h&&(y*=256);)this[n+g]=t/y&255;return n+h},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(t,n,h,f){if(t=+t,n=n>>>0,h=h>>>0,!f){const _=Math.pow(2,8*h)-1;D(this,t,n,h,_,0)}let y=h-1,g=1;for(this[n+y]=t&255;--y>=0&&(g*=256);)this[n+y]=t/g&255;return n+h},a.prototype.writeUint8=a.prototype.writeUInt8=function(t,n,h){return t=+t,n=n>>>0,h||D(this,t,n,1,255,0),this[n]=t&255,n+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(t,n,h){return t=+t,n=n>>>0,h||D(this,t,n,2,65535,0),this[n]=t&255,this[n+1]=t>>>8,n+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(t,n,h){return t=+t,n=n>>>0,h||D(this,t,n,2,65535,0),this[n]=t>>>8,this[n+1]=t&255,n+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(t,n,h){return t=+t,n=n>>>0,h||D(this,t,n,4,4294967295,0),this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=t&255,n+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(t,n,h){return t=+t,n=n>>>0,h||D(this,t,n,4,4294967295,0),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4};function ve(c,t,n,h,f){tt(t,h,f,c,n,7);let y=Number(t&BigInt(4294967295));c[n++]=y,y=y>>8,c[n++]=y,y=y>>8,c[n++]=y,y=y>>8,c[n++]=y;let g=Number(t>>BigInt(32)&BigInt(4294967295));return c[n++]=g,g=g>>8,c[n++]=g,g=g>>8,c[n++]=g,g=g>>8,c[n++]=g,n}function Xe(c,t,n,h,f){tt(t,h,f,c,n,7);let y=Number(t&BigInt(4294967295));c[n+7]=y,y=y>>8,c[n+6]=y,y=y>>8,c[n+5]=y,y=y>>8,c[n+4]=y;let g=Number(t>>BigInt(32)&BigInt(4294967295));return c[n+3]=g,g=g>>8,c[n+2]=g,g=g>>8,c[n+1]=g,g=g>>8,c[n]=g,n+8}a.prototype.writeBigUInt64LE=X(function(t,n=0){return ve(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=X(function(t,n=0){return Xe(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(t,n,h,f){if(t=+t,n=n>>>0,!f){const O=Math.pow(2,8*h-1);D(this,t,n,h,O-1,-O)}let y=0,g=1,_=0;for(this[n]=t&255;++y<h&&(g*=256);)t<0&&_===0&&this[n+y-1]!==0&&(_=1),this[n+y]=(t/g>>0)-_&255;return n+h},a.prototype.writeIntBE=function(t,n,h,f){if(t=+t,n=n>>>0,!f){const O=Math.pow(2,8*h-1);D(this,t,n,h,O-1,-O)}let y=h-1,g=1,_=0;for(this[n+y]=t&255;--y>=0&&(g*=256);)t<0&&_===0&&this[n+y+1]!==0&&(_=1),this[n+y]=(t/g>>0)-_&255;return n+h},a.prototype.writeInt8=function(t,n,h){return t=+t,n=n>>>0,h||D(this,t,n,1,127,-128),t<0&&(t=255+t+1),this[n]=t&255,n+1},a.prototype.writeInt16LE=function(t,n,h){return t=+t,n=n>>>0,h||D(this,t,n,2,32767,-32768),this[n]=t&255,this[n+1]=t>>>8,n+2},a.prototype.writeInt16BE=function(t,n,h){return t=+t,n=n>>>0,h||D(this,t,n,2,32767,-32768),this[n]=t>>>8,this[n+1]=t&255,n+2},a.prototype.writeInt32LE=function(t,n,h){return t=+t,n=n>>>0,h||D(this,t,n,4,2147483647,-2147483648),this[n]=t&255,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24,n+4},a.prototype.writeInt32BE=function(t,n,h){return t=+t,n=n>>>0,h||D(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4},a.prototype.writeBigInt64LE=X(function(t,n=0){return ve(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=X(function(t,n=0){return Xe(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ye(c,t,n,h,f,y){if(n+h>c.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Qe(c,t,n,h,f){return t=+t,n=n>>>0,f||Ye(c,t,n,4),r.write(c,t,n,h,23,4),n+4}a.prototype.writeFloatLE=function(t,n,h){return Qe(this,t,n,!0,h)},a.prototype.writeFloatBE=function(t,n,h){return Qe(this,t,n,!1,h)};function Ze(c,t,n,h,f){return t=+t,n=n>>>0,f||Ye(c,t,n,8),r.write(c,t,n,h,52,8),n+8}a.prototype.writeDoubleLE=function(t,n,h){return Ze(this,t,n,!0,h)},a.prototype.writeDoubleBE=function(t,n,h){return Ze(this,t,n,!1,h)},a.prototype.copy=function(t,n,h,f){if(!a.isBuffer(t))throw new TypeError("argument should be a Buffer");if(h||(h=0),!f&&f!==0&&(f=this.length),n>=t.length&&(n=t.length),n||(n=0),f>0&&f<h&&(f=h),f===h||t.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(h<0||h>=this.length)throw new RangeError("Index out of range");if(f<0)throw new RangeError("sourceEnd out of bounds");f>this.length&&(f=this.length),t.length-n<f-h&&(f=t.length-n+h);const y=f-h;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(n,h,f):Uint8Array.prototype.set.call(t,this.subarray(h,f),n),y},a.prototype.fill=function(t,n,h,f){if(typeof t=="string"){if(typeof n=="string"?(f=n,n=0,h=this.length):typeof h=="string"&&(f=h,h=this.length),f!==void 0&&typeof f!="string")throw new TypeError("encoding must be a string");if(typeof f=="string"&&!a.isEncoding(f))throw new TypeError("Unknown encoding: "+f);if(t.length===1){const g=t.charCodeAt(0);(f==="utf8"&&g<128||f==="latin1")&&(t=g)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(n<0||this.length<n||this.length<h)throw new RangeError("Out of range index");if(h<=n)return this;n=n>>>0,h=h===void 0?this.length:h>>>0,t||(t=0);let y;if(typeof t=="number")for(y=n;y<h;++y)this[y]=t;else{const g=a.isBuffer(t)?t:a.from(t,f),_=g.length;if(_===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(y=0;y<h-n;++y)this[y+n]=g[y%_]}return this};const te={};function $e(c,t,n){te[c]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${c}]`,this.stack,delete this.name}get code(){return c}set code(f){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:f,writable:!0})}toString(){return`${this.name} [${c}]: ${this.message}`}}}$e("ERR_BUFFER_OUT_OF_BOUNDS",function(c){return c?`${c} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),$e("ERR_INVALID_ARG_TYPE",function(c,t){return`The "${c}" argument must be of type number. Received type ${typeof t}`},TypeError),$e("ERR_OUT_OF_RANGE",function(c,t,n){let h=`The value of "${c}" is out of range.`,f=n;return Number.isInteger(n)&&Math.abs(n)>2**32?f=et(String(n)):typeof n=="bigint"&&(f=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(f=et(f)),f+="n"),h+=` It must be ${t}. Received ${f}`,h},RangeError);function et(c){let t="",n=c.length;const h=c[0]==="-"?1:0;for(;n>=h+4;n-=3)t=`_${c.slice(n-3,n)}${t}`;return`${c.slice(0,n)}${t}`}function ei(c,t,n){ie(t,"offset"),(c[t]===void 0||c[t+n]===void 0)&&oe(t,c.length-(n+1))}function tt(c,t,n,h,f,y){if(c>n||c<t){const g=typeof t=="bigint"?"n":"";let _;throw t===0||t===BigInt(0)?_=`>= 0${g} and < 2${g} ** ${(y+1)*8}${g}`:_=`>= -(2${g} ** ${(y+1)*8-1}${g}) and < 2 ** ${(y+1)*8-1}${g}`,new te.ERR_OUT_OF_RANGE("value",_,c)}ei(h,f,y)}function ie(c,t){if(typeof c!="number")throw new te.ERR_INVALID_ARG_TYPE(t,"number",c)}function oe(c,t,n){throw Math.floor(c)!==c?(ie(c,n),new te.ERR_OUT_OF_RANGE("offset","an integer",c)):t<0?new te.ERR_BUFFER_OUT_OF_BOUNDS:new te.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${t}`,c)}const ti=/[^+/0-9A-Za-z-_]/g;function ii(c){if(c=c.split("=")[0],c=c.trim().replace(ti,""),c.length<2)return"";for(;c.length%4!==0;)c=c+"=";return c}function Ce(c,t){t=t||1/0;let n;const h=c.length;let f=null;const y=[];for(let g=0;g<h;++g){if(n=c.charCodeAt(g),n>55295&&n<57344){if(!f){if(n>56319){(t-=3)>-1&&y.push(239,191,189);continue}else if(g+1===h){(t-=3)>-1&&y.push(239,191,189);continue}f=n;continue}if(n<56320){(t-=3)>-1&&y.push(239,191,189),f=n;continue}n=(f-55296<<10|n-56320)+65536}else f&&(t-=3)>-1&&y.push(239,191,189);if(f=null,n<128){if((t-=1)<0)break;y.push(n)}else if(n<2048){if((t-=2)<0)break;y.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0)break;y.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((t-=4)<0)break;y.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return y}function ni(c){const t=[];for(let n=0;n<c.length;++n)t.push(c.charCodeAt(n)&255);return t}function ri(c,t){let n,h,f;const y=[];for(let g=0;g<c.length&&!((t-=2)<0);++g)n=c.charCodeAt(g),h=n>>8,f=n%256,y.push(f),y.push(h);return y}function it(c){return e.toByteArray(ii(c))}function de(c,t,n,h){let f;for(f=0;f<h&&!(f+n>=t.length||f>=c.length);++f)t[f+n]=c[f];return f}function V(c,t){return c instanceof t||c!=null&&c.constructor!=null&&c.constructor.name!=null&&c.constructor.name===t.name}function Fe(c){return c!==c}const si=function(){const c="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const h=n*16;for(let f=0;f<16;++f)t[h+f]=c[n]+c[f]}return t}();function X(c){return typeof BigInt>"u"?oi:c}function oi(){throw new Error("BigInt not supported")}}(Oe)),Oe}var be=ui();class v{idKey;items=[];methods=void 0;constructor(e,r,s){this.idKey=e,s&&(this.methods=s(this)),r&&(this.items=r)}find(e){for(let r=0;r<this.items.length;r++){const s=this.items[r];if(e(s))return s}return null}findById(e){return this.items.find(s=>s[this.idKey]===e)||null}findMany(e){const r=[];for(let s=0;s<this.items.length;s++){const o=this.items[s];e(o)&&r.push(this.items[s])}return r}findManyById(e){return this.items.filter(r=>e.includes(r[this.idKey]))}set(e){const r=e instanceof Array?e:[e];for(let s=0;s<r.length;s++){const o=r[s];let u=!1;for(let l=0;l<this.items.length;l++)if(this.items[l][this.idKey]===o[this.idKey]){u=!0,this.items.splice(l,1,o);break}u||this.items.push(o)}}remove(e){const r=e instanceof Array?e:[e];for(let s=0;s<r.length;s++){const o=r[s];for(let u=0;u<this.items.length;u++)this.items[u][this.idKey]===o&&this.items.splice(u,1)}}}function Ie(i,e,r,s,o){const u=[];if(typeof i!="object"||i instanceof Array)return u;for(let l=0;l<e.length;l++){const a=e[l];if(typeof i[a.name]>"u"){if(a.required)throw Error(`[${o}] Missing value for required property "${a.name}"`);const m=r.find(p=>p.id===a.id);u.push({id:a.id,data:m?m.data:li(a)});continue}const d=i[a.name];if(a.type==="BOOLEAN"||a.type==="NUMBER"||a.type==="STRING"){const m=a.type.toLowerCase();if(a.array){if(!(d instanceof Array))throw Error(`[${o}.${a.name}] must be an array of ${m}`);const p=d.findIndex(E=>typeof E!==m);if(p!==-1)throw Error(`[${o}.${a.name}] item at index "${p}" is not ${m}`);u.push({id:a.id,data:d});continue}if(typeof d!==m)throw Error(`[${o}.${a.name}] must be a ${m}`);u.push({id:a.id,data:[d]})}else if(a.type==="ENUMERATION"){if(!a.data.propEnum)throw Error(`[${o}.${a.name}] failed to find enumeration information for this property: INTERNAL_ERROR`);const m="string";if(a.array){if(!(d instanceof Array))throw Error(`[${o}.${a.name}] must be an array of ${m}`);for(let p=0;p<d.length;p++){const E=d[p];if(typeof E!="string")throw Error(`[${o}.${a.name}] item at index "${p}" is not ${m}`);if(!a.data.propEnum.items.find(S=>S===E))throw Error(`[${o}.${a.name}.${p}] item value "${E}" is not allowed. Allowed values: ${a.data.propEnum.items.join(", ")}`)}u.push({id:a.id,data:d});continue}if(typeof d!==m)throw Error(`[${o}.${a.name}] must be a ${m}`);u.push({id:a.id,data:[d]})}else if(a.type==="DATE"){if(a.array){if(!(d instanceof Array))throw Error(`[${o}.${a.name}] must be an array of objects`);for(let m=0;m<d.length;m++){const p=d[m];if(typeof p!="object")throw Error(`[${o}.${a.name}] item at index "${m}" is not object`);if(typeof p.timestamp!="number"||typeof p.timezoneOffset!="number")throw Error(`[${o}.${a.name}.${m}] item value "${JSON.stringify(p)}" is not allowed. It must be formated: {timestamp: number, timezoneOffset: number}`)}u.push({id:a.id,data:d});continue}if(typeof d!="object")throw Error(`[${o}.${a.name}] must be an object`);if(typeof d.timestamp!="number"||typeof d.timezoneOffset!="number")throw Error(`[${o}.${a.name}] value "${JSON.stringify(d)}" is not allowed. It must be formated: {timestamp: number, timezoneOffset: number}`);u.push({id:a.id,data:[d]})}else if(a.type==="ENTRY_POINTER"){if(a.array){if(!(d instanceof Array))throw Error(`[${o}.${a.name}] must be an array of objects`);for(let m=0;m<d.length;m++){const p=d[m];if(typeof p!="object")throw Error(`[${o}.${a.name}] item at index "${m}" is not object`);if(typeof p.entryId!="string"||typeof p.templateId!="string")throw Error(`[${o}.${a.name}.${m}] item value "${JSON.stringify(p)}" is not allowed. It must be formated: {entryId: string, templateId: string}`)}u.push({id:a.id,data:d.map(m=>({eid:m.entryId,tid:m.templateId}))});continue}if(typeof d!="object")throw Error(`[${o}.${a.name}] must be an abject`);if(typeof d.entryId!="string"||typeof d.templateId!="string")throw Error(`[${o}.${a.name}] item value "${JSON.stringify(d)}" is not allowed. It must be formated: {entryId: string, templateId: string}`);u.push({id:a.id,data:[{eid:d.entryId,tid:d.templateId}]})}else if(a.type==="GROUP_POINTER"){if(!a.data.propGroupPointer)throw Error(`[${o}.${a.name}] failed to find group pointer information for this property: INTERNAL_ERROR`);const m=a.data.propGroupPointer._id,p=s.find(I=>I._id===m);if(!p)throw Error(`[${o}.${a.name}] group with ID "${m}" does not exist`);const E=r.find(I=>I.id===a.id),S=E?E.data.items:[];if(a.array){if(!(d instanceof Array))throw Error(`[${o}.${a.name}] must be an array of objects`);const I=[];for(let b=0;b<d.length;b++){const x=d[b];if(typeof x!="object")throw Error(`[${o}.${a.name}] item at index "${b}" is not object`);I.push({props:Ie(x,p.props,S[b]?S[b].props:[],s,`${o}.${b}.${a.name}`)})}u.push({id:a.id,data:{_id:a.data.propGroupPointer._id,items:I}});continue}if(typeof d!="object")throw Error(`[${o}.${a.name}] must be an abject`);u.push({id:a.id,data:{_id:p._id,items:[{props:Ie(d,p.props,S[0]?S[0].props:[],s,`${o}.${a.name}`)}]}})}else if(a.type==="MEDIA"){if(a.array){if(!(d instanceof Array))throw Error(`[${o}.${a.name}] must be an array of object`);const m=[];for(let p=0;p<d.length;p++){const E=d[p];if(typeof E!="object")throw Error(`[${o}.${a.name}] item at index "${p}" is not object`);if(typeof E.mediaId!="string")throw Error(`[${o}.${p}.${a.name}] object is missing required property "mediaId"`);m.push({_id:E.mediaId,alt_text:E.altText,caption:E.caption})}u.push({id:a.id,data:m});continue}if(typeof d!="object")throw Error(`[${o}.${a.name}] must be an object`);if(typeof d.mediaId!="string")throw Error(`[${o}.${a.name}] object is missing required property "mediaId"`);u.push({id:a.id,data:[{_id:d.mediaId,alt_text:d.altText,caption:d.caption}]})}else if(a.type==="RICH_TEXT"){if(a.array){if(!(d instanceof Array))throw Error(`[${o}.${a.name}] must be an array of object`);const m=[];for(let p=0;p<d.length;p++){const E=d[p];if(typeof E!="object")throw Error(`[${o}.${a.name}] item at index "${p}" is not object`);if(typeof E.nodes!="object"||!(E.nodes instanceof Array))throw Error(`[${o}.${p}.${a.name}] object is missing required property "nodes" of type object array`);m.push(E)}u.push({id:a.id,data:m});continue}if(typeof d!="object")throw Error(`[${o}.${a.name}] must be an object`);if(typeof d.nodes!="object"||!(d.nodes instanceof Array))throw Error(`[${o}.${a.name}] object is missing required property "nodes" of type object array`);u.push({id:a.id,data:[d]})}}return u}function li(i){switch(i.type){case"BOOLEAN":return[];case"ENUMERATION":return[];case"DATE":return[];case"ENTRY_POINTER":return[];case"GROUP_POINTER":{if(!i.data.propGroupPointer)throw Error(`Property of type Group Pointer is missing data object: ${JSON.stringify(i,null,4)}`);return{_id:i.data.propGroupPointer._id,items:[]}}case"MEDIA":return[];case"NUMBER":return[];case"RICH_TEXT":return[];case"STRING":return[]}return[]}class hi{baseUri(e){return`/api/v3/org/:orgId/instance/:instanceId/template/${e}/entry`}constructor(e){this.client=e,this.templates=null,this.latch={},this.cacheLite=new v("_id"),this.cacheRaw=new v("_id"),this.cacheParse=new v("_id"),this.client.enableSocket&&this.client.socket.register("entry",async r=>{r.type==="update"?this.client.useMemCache&&(await this.getById(r.entryId,r.templateId,!0),await this.getByIdLite(r.entryId,r.templateId,!0),await this.getByIdRaw(r.entryId,r.templateId,!0)):(this.cacheLite.remove(r.entryId),this.cacheParse.remove(r.entryId),this.cacheRaw.remove(r.entryId))})}async findTemplateByName(e){this.client.useMemCache?this.templates=await this.client.template.getAll():this.templates||(this.templates=await this.client.template.getAll());const r=this.templates.find(s=>s.name===e||s._id===e);if(!r)throw Error(`Template with Name or ID "${e}" is not found"`);return r}async getAllLite(e,r){const s=await this.findTemplateByName(e),o=`all_lite_${s._id}`;if(!r&&this.client.useMemCache&&this.latch[o])return this.cacheLite.items.filter(l=>l.templateId===s._id);const u=await this.client.send({url:`${this.baseUri(s._id)}/all/lite`});return this.client.useMemCache&&(this.cacheLite.set(u.items),this.latch[o]=!0),u.items}async getAll(e,r){const s=await this.findTemplateByName(e),o=`all_parse_${s._id}`;if(!r&&this.client.useMemCache&&this.latch[o])return this.cacheParse.items.filter(l=>l.templateId===s._id);const u=await this.client.send({url:`${this.baseUri(s._id)}/all/parsed`});return this.client.injectSvg&&await this.injectMediaSvg(u.items),this.client.useMemCache&&(this.cacheParse.set(u.items),this.latch[o]=!0),u.items}async getAllRaw(e,r){const s=await this.findTemplateByName(e),o=`all_raw_${s._id}`;if(!r&&this.client.useMemCache&&this.latch[o])return this.cacheRaw.items.filter(l=>l.templateId===s._id);const u=await this.client.send({url:`${this.baseUri(s._id)}/all`});return this.client.useMemCache&&(this.cacheRaw.set(u.items),this.latch[o]=!0),u.items}async getAllByStatus(e,r,s){const o=await this.findTemplateByName(e),u=`all_parse_${o._id}`,l=`all_parse_${o._id}_status_${r}`;if(!s&&this.client.useMemCache&&(this.latch[l]||this.latch[u]))return this.cacheParse.items.filter(d=>d.templateId===o._id&&d.statuses.find(m=>m.id===r||m.label===r));const a=await this.client.send({url:`${this.baseUri(o._id)}/all_by_status/${r}/parsed`});return this.client.injectSvg&&await this.injectMediaSvg(a.items),this.client.useMemCache&&(this.cacheParse.set(a.items),this.latch[l]=!0),a.items}async getAllRawByStatus(e,r,s){const o=await this.findTemplateByName(e),u=`all_raw_${o._id}`,l=`all_raw_${o._id}_status_${r}`;if(!s&&this.client.useMemCache&&(this.latch[l]||this.latch[u])){const m=(await this.client.entryStatus.getAll()).find(p=>p._id===r||p.label===r);return m?this.cacheRaw.items.filter(p=>p.templateId===o._id&&p.statuses.find(E=>E.id===m._id)):[]}const a=await this.client.send({url:`${this.baseUri(o._id)}/all_by_status/${r}`});return this.client.useMemCache&&(this.cacheRaw.set(a.items),this.latch[l]=!0),a.items}async getByIdLite(e,r,s){const o=await this.findTemplateByName(r);if(!s&&this.client.useMemCache){const l=this.cacheLite.find(a=>a._id===e&&a.templateId===o._id);if(l)return l}const u=await this.client.send({url:`${this.baseUri(o._id)}/${e}/lite`});return this.client.useMemCache&&this.cacheLite.set(u.item),u.item}async getById(e,r,s){const o=await this.findTemplateByName(r);if(!s&&this.client.useMemCache){const l=this.cacheParse.find(a=>a.templateId===o._id&&a._id===e);if(l)return l}const u=await this.client.send({url:`${this.baseUri(o._id)}/${e}/parse`});return this.client.injectSvg&&await this.injectMediaSvg([u.item]),this.client.useMemCache&&this.cacheParse.set(u.item),u.item}async getBySlug(e,r,s){const o=await this.findTemplateByName(r);if(!s&&this.client.useMemCache){const l=this.cacheParse.find(a=>a.templateId===o._id&&Object.keys(a.meta).find(d=>a.meta[d].slug===e));if(l)return l}const u=await this.client.send({url:`${this.baseUri(o._id)}/${e}/parse`});return this.client.injectSvg&&await this.injectMediaSvg([u.item]),this.client.useMemCache&&this.cacheParse.set(u.item),u.item}async getByIdRaw(e,r,s){const o=await this.findTemplateByName(r);if(!s&&this.client.useMemCache){const l=this.cacheRaw.find(a=>a._id===e&&a.templateId===o._id);if(l)return l}const u=await this.client.send({url:`${this.baseUri(o._id)}/${e}`});return this.client.useMemCache&&this.cacheRaw.set(u.item),u.item}async create(e,r){const s={meta:[],content:r.content.map(a=>({lng:a.lng,nodes:a.nodes,plainText:""})),statuses:r.statuses.map(a=>({lng:a.lng,id:a.id}))},o=await this.findTemplateByName(e),u=await this.client.group.getAll();for(let a=0;a<r.meta.length;a++){const d=r.meta[a];s.meta.push({lng:d.lng,props:Ie(d.data,o.props,[],u,"entry")})}const l=await this.client.send({url:`${this.baseUri(o._id)}/create`,method:"POST",data:s});return this.client.useMemCache&&(this.cacheRaw.set(l.item),this.cacheParse.set(await this.getById(l.item._id,l.item.templateId,!0))),l.item}async createRaw(e,r){const s=await this.findTemplateByName(e),o=await this.client.send({url:`${this.baseUri(s._id)}/create`,method:"POST",data:r});return this.client.useMemCache&&(this.cacheRaw.set(o.item),this.cacheParse.set(await this.getById(o.item._id,o.item.templateId,!0))),o.item}async update(e,r,s){const o={status:s.status,lng:s.lng,content:{nodes:s.content},meta:{props:[]}},u=await this.findTemplateByName(e),a=(await this.getByIdRaw(r,u._id)).meta.find(p=>p.lng===s.lng),d=await this.client.group.getAll();o.meta.props=Ie(s.meta,u.props,a?a.props:[],d,"entry");const m=await this.client.send({url:`${this.baseUri(u._id)}/${r}/update`,method:"PUT",data:o});return this.client.useMemCache&&(this.cacheRaw.set(m.item),this.cacheParse.set(await this.getById(m.item._id,m.item.templateId,!0))),m.item}async updateRaw(e,r,s){const o=await this.findTemplateByName(e),u=await this.client.send({url:`${this.baseUri(o._id)}/${r}/update`,method:"PUT",data:s});return this.client.useMemCache&&(this.cacheRaw.set(u.item),this.cacheParse.set(await this.getById(u.item._id,u.item.templateId,!0))),u.item}async deleteById(e,r){const s=await this.findTemplateByName(r),o=await this.client.send({url:`${this.baseUri(s._id)}/${e}`,method:"DELETE"});return this.client.useMemCache&&(this.cacheRaw.remove(o.item._id),this.cacheParse.remove(o.item._id),this.cacheLite.remove(o.item._id)),o.item}async injectMediaSvg(e){const r={},s=async o=>{const u=o;if(u.type==="SVG"&&u._id&&u.name&&u.width&&u.height&&u.mimetype)if(r[u._id])o.svg=r[u._id];else{const l=await this.client.media.getMediaBin(u._id,u.name);o.svg=be.Buffer.from(l).toString(),r[u._id]=o.svg}else for(const l in o)if(o[l]&&typeof o[l]=="object")if(o[l]instanceof Array)for(let a=0;a<o[l].length&&(o[l][a]&&typeof o[l][a]=="object");a++)await s(o[l][a]);else await s(o[l])};for(let o=0;o<e.length;o++)await s(e[o])}}class fi{constructor(e){this.client=e,this.baseUri="/api/v3/org/:orgId/instance/:instanceId/entry-status",this.cache=new v("_id"),this.latch={},this.client.enableSocket&&this.client.socket.register("entry_status",async r=>{r.type==="update"?this.cache.findById(r.entryStatusId)&&await this.getById(r.entryStatusId,!0):this.cache.remove(r.entryStatusId)})}async getAll(e){if(!e&&this.client.enableSocket&&this.latch.all)return this.cache.items;const r=await this.client.send({url:`${this.baseUri}/all`});return this.client.useMemCache&&(this.cache.set(r.items),this.latch.all=!0),r.items}async getById(e,r){if(!r&&this.client.enableSocket){const o=this.cache.findById(e);if(o)return o}const s=await this.client.send({url:`${this.baseUri}/${e}`});return this.client.useMemCache&&this.cache.set(s.item),s.item}}class di{constructor(e){this.client=e,this.baseUri="/api/v3/org/:orgId/instance/:instanceId/group",this.cache=new v("_id"),this.latch={},this.client.enableSocket&&this.client.socket.register("group",async r=>{r.type==="update"?this.cache.findById(r.groupId)&&await this.getById(r.groupId,!0):this.cache.remove(r.groupId)})}async whereIsItUsed(e){return await this.client.send({url:`${this.baseUri}/${e}/where-is-it-used`})}async getAll(e){if(!e&&this.client.useMemCache&&this.latch.all)return this.cache.items;const r=await this.client.send({url:`${this.baseUri}/all`});return this.client.useMemCache&&(this.cache.set(r.items),this.latch.all=!0),r.items}async getById(e,r){if(!r&&this.client.useMemCache){const o=this.cache.findById(e);if(o)return o}const s=await this.client.send({url:`${this.baseUri}/${e}`});return this.client.useMemCache&&this.cache.set(s.item),s.item}}class pi{constructor(e){this.client=e,this.baseUri="/api/v3/org/:orgId/instance/:instanceId/language",this.cache=new v("_id"),this.latch={},this.client.enableSocket&&this.client.socket.register("language",async r=>{r.type==="update"?this.cache.findById(r.languageId)&&await this.getById(r.languageId,!0):this.cache.remove(r.languageId)})}async getAll(e){if(!e&&this.client.useMemCache&&this.latch.all)return this.cache.items;const r=await this.client.send({url:`${this.baseUri}/all`});return this.client.useMemCache&&this.cache.set(r.items),r.items}async getById(e,r){if(!r&&this.client.useMemCache){const o=this.cache.findById(e);if(o)return o}const s=await this.client.send({url:`${this.baseUri}/${e}`});return this.client.useMemCache&&this.cache.set(s.item),s.item}}class mi{constructor(e){this.client=e,this.cache=new v("_id"),this.latch={},this.baseUri="/api/v3/org/:orgId/instance/:instanceId/media",this.client.enableSocket&&this.client.socket.register("media",async r=>{r.type==="update"?this.cache.findById(r.mediaId)&&await this.getById(r.mediaId,!0):this.cache.remove(r.mediaId)})}resolvePath(e,r){if(e.parentId){const s=r.find(o=>o._id===e.parentId);if(s)return`${this.resolvePath(s,r)}/${e.name}`}return"/"+e.name}async getAll(e){if(!e&&this.client.useMemCache&&this.latch.all)return this.cache.items;const r=await this.client.send({url:`${this.baseUri}/all`}),s=[];for(let o=0;o<r.items.length;o++){const u=r.items[o],l=this.toMediaExtended(u);if(u.type==="SVG"&&this.client.injectSvg){const a=await this.getMediaBin(u._id,u.name);l.svg=be.Buffer.from(a).toString()}s.push(l)}return this.client.useMemCache&&(this.cache.set(s),this.latch.all=!0),s}async getById(e,r){if(!r&&this.client.useMemCache){const l=this.cache.findById(e);if(l)return l}const o=(await this.client.send({url:`${this.baseUri}/${e}`})).item,u=this.toMediaExtended(o);if(o.type==="SVG"&&this.client.injectSvg){const l=await this.getMediaBin(o._id,o.name);u.svg=be.Buffer.from(l).toString()}return this.client.useMemCache&&this.cache.set(u),u}async getMediaBin(e,r,s){const o=[];s&&(s.webp&&o.push("webp=t"),s.sizeTransform&&o.push(`sizeT=${s.sizeTransform}`),s.thumbnail&&o.push("tmb=t"));let u;return this.client.cmsOrigin.startsWith("https://app.thebcms.com")?u="https://cdn.thebcms.com":u=this.client.cmsOrigin,await this.client.send({url:`${u}${this.baseUri}/${e}/bin2/${r}${o.length>0?`?${o.join("&")}`:""}`,method:"get",responseType:"arraybuffer"})}toUri(e,r,s){const o=[];s&&(s.webp&&o.push("webp=t"),s.sizeTransform&&o.push(`sizeT=${s.sizeTransform}`),s.thumbnail&&o.push("tmb=t")),o.push(`apiKey=${this.client.apiKeyInfo.id}.${this.client.apiKeyInfo.secret}`);let u=this.baseUri.replace(":instanceId",this.client.instanceId).replace(":orgId",this.client.orgId);return u+=`/${e}/bin2/${encodeURIComponent(r)}`,o.length>0&&(u+="?"+o.join("&")),u}toMediaExtended(e){return{...e,bin:async r=>this.getMediaBin(e._id,e.name,r),thumbnail:async()=>this.getMediaBin(e._id,e.name,{thumbnail:!0})}}}let me;const yi=new Uint8Array(16);function wi(){if(!me&&(me=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!me))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return me(yi)}const L=[];for(let i=0;i<256;++i)L.push((i+256).toString(16).slice(1));function gi(i,e=0){return L[i[e+0]]+L[i[e+1]]+L[i[e+2]]+L[i[e+3]]+"-"+L[i[e+4]]+L[i[e+5]]+"-"+L[i[e+6]]+L[i[e+7]]+"-"+L[i[e+8]]+L[i[e+9]]+"-"+L[i[e+10]]+L[i[e+11]]+L[i[e+12]]+L[i[e+13]]+L[i[e+14]]+L[i[e+15]]}const Ei=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ot={randomUUID:Ei};function Pe(i,e,r){if(ot.randomUUID&&!i)return ot.randomUUID();i=i||{};const s=i.random||(i.rng||wi)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,gi(s)}var ne=null;typeof WebSocket<"u"?ne=WebSocket:typeof MozWebSocket<"u"?ne=MozWebSocket:typeof global<"u"?ne=global.WebSocket||global.MozWebSocket:typeof window<"u"?ne=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(ne=self.WebSocket||self.MozWebSocket);const bi=ne;class ye{error;constructor(e){this.error=e}}class at{data;constructor(e){this.data=e}}function Ii(){let i=!1;const e=[];function r(){const s=e.pop();s?s.handler(()=>{r()}):i=!1}return s=>{const o=Pe();let u;const l=new Promise(a=>{u=a});return s.priority?e.push({id:o,name:s.name,handler:a=>{s.handler().then(d=>{u(new at(d)),a()}).catch(d=>{u(new ye(d)),a()})}}):e.splice(0,0,{id:o,name:s.name,handler:a=>{s.handler().then(d=>{u(new at(d)),a()}).catch(d=>{u(new ye(d)),a()})}}),l.catch(a=>{console.error(s.name,a)}),i||(i=!0,r()),{wait:l,stop:()=>{for(let a=0;a<e.length;a++)e[a].id===o&&(e.splice(a,1),u(new ye(Error("Queue item has been canceled by user"))))}}}}class xi{constructor(e){this.client=e,this.id=null,this.socket=null,this.connected=!1,this.subs={},this.tryReconnectIn=1e3,this.maxReconnectTime=6e4,this.disconnected=!1,this.internalEventSubs={open:[],close:[]},this.connectionQueue=Ii(),this.debugIgnoreEventNames=["entry_sync_mouse_move","entry_sync_prose_cursor_update"],this.subs.all=[],this.register("socket_connection",async r=>{const s=r;this.id=s.id})}clear(){this.socket&&this.socket.close()}async connect(){const e=await this.connectionQueue({name:"Connection",handler:async()=>{!this.connected&&!this.disconnected&&(this.id=null,await new Promise((r,s)=>{this.socket=new bi(this.client.cmsOrigin?`${this.client.cmsOrigin.startsWith("https")?"wss":"ws"}://${this.client.cmsOrigin.split("://")[1]}/api/v3/socket?token=apikey_${this.client.apiKeyInfo.id}.${this.client.apiKeyInfo.secret}`:`${window.location.host.includes(":8081")?"ws":"wss"}://${window.location.host}/api/v3/socket?token=apikey_${this.client.apiKeyInfo.id}.${this.client.apiKeyInfo.secret}`,{timeout:1e4}),this.socket.addEventListener("open",async()=>{this.tryReconnectIn=1e3,this.connected=!0;for(let o=0;o<this.internalEventSubs.open.length;o++)await this.internalEventSubs.open[o].handler();r()}),this.socket.addEventListener("close",async()=>{this.connected=!1;for(let o=0;o<this.internalEventSubs.close.length;o++)await this.internalEventSubs.open[o].handler();setTimeout(async()=>{this.tryReconnectIn=this.tryReconnectIn*2,this.tryReconnectIn>this.maxReconnectTime&&(this.tryReconnectIn=this.maxReconnectTime),await this.connect()},this.tryReconnectIn)}),this.socket.addEventListener("error",async o=>{console.error("Connection error",o);for(let u=0;u<this.internalEventSubs.close.length;u++)await this.internalEventSubs.open[u].handler();s(o)}),this.socket.addEventListener("message",async o=>{try{const u=JSON.parse(o.data);if(this.shouldDebug()&&this.debug("receive",u.en,u.ed),this.subs[u.en])for(let l=0;l<this.subs[u.en].length;l++)await this.subs[u.en][l].handler(u.ed,void 0);for(let l=0;l<this.subs.all.length;l++)await this.subs.all[l].handler(u.ed,void 0)}catch(u){console.error("Invalid message from server",o.data),console.error(u)}})}))}}).wait;if(e instanceof ye)throw e.error}register(e,r){const s=Pe();return this.subs[e]||(this.subs[e]=[]),this.subs[e].push({id:s,handler:async o=>{try{await r(o,void 0)}catch(u){console.error("Failed to execute socket handler",{eventName:e,error:u})}}}),()=>{for(let o=0;o<this.subs[e].length;o++)if(this.subs[e][o].id===s){this.subs[e].splice(o,1);break}}}internalEventRegister(e,r){const s=Pe();return this.internalEventSubs[e].push({id:s,handler:r}),e==="open"&&this.id&&r().catch(o=>console.error(o)),e==="close"&&!this.id&&r().catch(o=>console.error(o)),()=>{for(let o=0;o<this.internalEventSubs[e].length;o++)if(this.internalEventSubs[e][o].id===s){this.internalEventSubs[e].splice(o,1);break}}}emit(e,r){this.socket&&this.connected&&(this.shouldDebug()&&this.debug("emit",e,r),this.socket.send(JSON.stringify({en:e,ed:r})))}debug(e,r,s){this.debugIgnoreEventNames.includes(r)||console.debug(`%c[socket] %c(${e}) %c${r} %c-> data: `,"color: #5577ff;","color: current;","color: #44ff77","color: current",s)}shouldDebug(){return this.client.debug}disconnect(){this.socket&&(this.disconnected=!0,this.socket.close(),this.socket.terminate(),setTimeout(()=>{this.disconnected=!1},1e3))}}class Bi{constructor(e){this.client=e,this.baseUri="/api/v3/org/:orgId/instance/:instanceId/template",this.latch={},this.cache=new v("_id"),this.client.enableSocket&&this.client.socket.register("template",async r=>{r.type==="update"?this.cache.findById(r.templateId)&&await this.getById(r.templateId,!0):this.cache.remove(r.templateId)})}async whereIsItUsed(e){return await this.client.send({url:`${this.baseUri}/${e}`})}async getAll(e){if(!e&&this.client.useMemCache&&this.latch.all)return this.cache.items;const r=await this.client.send({url:`${this.baseUri}/all`});return this.client.useMemCache&&(this.cache.items=r.items,this.latch.all=!0),r.items}async getById(e,r){if(!r&&this.client.useMemCache){const o=this.cache.findById(e);if(o)return o}const s=await this.client.send({url:`${this.baseUri}/${e}`});return this.client.useMemCache&&this.cache.set(s.item),s.item}async update(e,r){const s=await this.client.send({url:`${this.baseUri}/${e}/update`,method:"PUT",data:r});return this.client.useMemCache&&this.cache.set(s.item),s.item}async deleteById(e){const r=await this.client.send({url:`${this.baseUri}/${e}`,method:"DELETE"});return this.client.useMemCache&&this.cache.remove(e),r.item}}class Si{constructor(e){this.client=e,this.baseUri="/api/v3/org/:orgId/instance/:instanceId/type-generator"}async getFiles(e){return(await this.client.send({url:`${this.baseUri}/${e}`})).items}}class Ri{constructor(e){this.client=e,this.baseUri="/api/v3/org/:orgId/instance/:instanceId/widget",this.cache=new v("_id"),this.latch={},this.client.enableSocket&&this.client.socket.register("widget",async r=>{r.type==="update"?this.cache.findById(r.widgetId)&&await this.getById(r.widgetId,!0):this.cache.remove(r.widgetId)})}async whereIsItUsed(e){return await this.client.send({url:`${this.baseUri}/${e}/where-is-it-used`})}async getAll(e){if(!e&&this.client.useMemCache&&this.latch.all)return this.cache.items;const r=await this.client.send({url:`${this.baseUri}/all`});return this.client.useMemCache&&(this.cache.set(r.items),this.latch.all=!0),r.items}async getById(e,r){if(!r&&this.client.useMemCache){const o=this.cache.findById(e);if(o)return o}const s=await this.client.send({url:`${this.baseUri}/${e}`});return this.client.useMemCache&&this.cache.set(s.item),s.item}}class Ti{constructor(e,r,s){this.client=e,this.media=r,this.sizeTransform=s,this.parsable=!!r.sizeTransforms;const o=this.media.name.split(".");this.fileName=encodeURIComponent(o.slice(0,o.length-1).join(".")),this.fileExtension=encodeURIComponent(o[o.length-1])}closestSize(e){if(!this.media.sizeTransforms&&!this.sizeTransform)return;const r=typeof window>"u"?1:window.devicePixelRatio,s=e*r;let o=1e6,u=0;const l=this.sizeTransform||this.media.sizeTransforms;for(let a=0;a<l.length;a++){const[d]=l[a].split("x"),m=parseInt(d,10);let p=s-m;p<0&&(p=-p),p<o&&(o=p,u=a)}return l[u]}async getSvgContent(){if(this.media.type!=="SVG")throw Error("Provided media is not of type SVG -> "+JSON.stringify(this.media,null,2));if(this.media.svg)return this.media.svg;const e=await this.client.media.getMediaBin(this.media._id,this.media.name);return be.Buffer.from(e).toString()}getPictureSrcSet(e){const r=this.closestSize(e);let s=this.media.width,o=this.media.height;if(r){const[l,a]=r.split("x");s=parseInt(l,10),o=parseInt(a,10)}let u;return this.client.cmsOrigin.startsWith("https://app.thebcms.com")?u="https://cdn.thebcms.com":u=this.client.cmsOrigin,{original:`${u}${this.client.media.toUri(this.media._id,this.media.name)}`,src1:`${u}${this.client.media.toUri(this.media._id,this.fileName+".webp",r?{webp:!0,sizeTransform:r}:void 0)}`,src2:`${u}${this.client.media.toUri(this.media._id,this.fileName+"."+this.fileExtension,r?{sizeTransform:r}:void 0)}`,width:parseInt(s.toFixed(0)),height:parseInt(o!==-1?o.toFixed(0):(s/(this.media.width/this.media.height)).toFixed(0))}}}function It(i,e){return function(){return i.apply(e,arguments)}}const{toString:Ai}=Object.prototype,{getPrototypeOf:Ke}=Object,Se=(i=>e=>{const r=Ai.call(e);return i[r]||(i[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),W=i=>(i=i.toLowerCase(),e=>Se(e)===i),Re=i=>e=>typeof e===i,{isArray:re}=Array,ue=Re("undefined");function _i(i){return i!==null&&!ue(i)&&i.constructor!==null&&!ue(i.constructor)&&q(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const xt=W("ArrayBuffer");function Ui(i){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(i):e=i&&i.buffer&&xt(i.buffer),e}const $i=Re("string"),q=Re("function"),Bt=Re("number"),Te=i=>i!==null&&typeof i=="object",Ci=i=>i===!0||i===!1,we=i=>{if(Se(i)!=="object")return!1;const e=Ke(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Fi=W("Date"),Oi=W("File"),Ni=W("Blob"),Mi=W("FileList"),ki=i=>Te(i)&&q(i.pipe),Pi=i=>{let e;return i&&(typeof FormData=="function"&&i instanceof FormData||q(i.append)&&((e=Se(i))==="formdata"||e==="object"&&q(i.toString)&&i.toString()==="[object FormData]"))},Li=W("URLSearchParams"),[ji,Di,Hi,qi]=["ReadableStream","Request","Response","Headers"].map(W),zi=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function le(i,e,{allOwnKeys:r=!1}={}){if(i===null||typeof i>"u")return;let s,o;if(typeof i!="object"&&(i=[i]),re(i))for(s=0,o=i.length;s<o;s++)e.call(null,i[s],s,i);else{const u=r?Object.getOwnPropertyNames(i):Object.keys(i),l=u.length;let a;for(s=0;s<l;s++)a=u[s],e.call(null,i[a],a,i)}}function St(i,e){e=e.toLowerCase();const r=Object.keys(i);let s=r.length,o;for(;s-- >0;)if(o=r[s],e===o.toLowerCase())return o;return null}const Y=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Rt=i=>!ue(i)&&i!==Y;function Le(){const{caseless:i}=Rt(this)&&this||{},e={},r=(s,o)=>{const u=i&&St(e,o)||o;we(e[u])&&we(s)?e[u]=Le(e[u],s):we(s)?e[u]=Le({},s):re(s)?e[u]=s.slice():e[u]=s};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&le(arguments[s],r);return e}const Ki=(i,e,r,{allOwnKeys:s}={})=>(le(e,(o,u)=>{r&&q(o)?i[u]=It(o,r):i[u]=o},{allOwnKeys:s}),i),Wi=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),Ji=(i,e,r,s)=>{i.prototype=Object.create(e.prototype,s),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:e.prototype}),r&&Object.assign(i.prototype,r)},Vi=(i,e,r,s)=>{let o,u,l;const a={};if(e=e||{},i==null)return e;do{for(o=Object.getOwnPropertyNames(i),u=o.length;u-- >0;)l=o[u],(!s||s(l,i,e))&&!a[l]&&(e[l]=i[l],a[l]=!0);i=r!==!1&&Ke(i)}while(i&&(!r||r(i,e))&&i!==Object.prototype);return e},Gi=(i,e,r)=>{i=String(i),(r===void 0||r>i.length)&&(r=i.length),r-=e.length;const s=i.indexOf(e,r);return s!==-1&&s===r},vi=i=>{if(!i)return null;if(re(i))return i;let e=i.length;if(!Bt(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=i[e];return r},Xi=(i=>e=>i&&e instanceof i)(typeof Uint8Array<"u"&&Ke(Uint8Array)),Yi=(i,e)=>{const s=(i&&i[Symbol.iterator]).call(i);let o;for(;(o=s.next())&&!o.done;){const u=o.value;e.call(i,u[0],u[1])}},Qi=(i,e)=>{let r;const s=[];for(;(r=i.exec(e))!==null;)s.push(r);return s},Zi=W("HTMLFormElement"),en=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,o){return s.toUpperCase()+o}),ct=(({hasOwnProperty:i})=>(e,r)=>i.call(e,r))(Object.prototype),tn=W("RegExp"),Tt=(i,e)=>{const r=Object.getOwnPropertyDescriptors(i),s={};le(r,(o,u)=>{let l;(l=e(o,u,i))!==!1&&(s[u]=l||o)}),Object.defineProperties(i,s)},nn=i=>{Tt(i,(e,r)=>{if(q(i)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=i[r];if(q(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},rn=(i,e)=>{const r={},s=o=>{o.forEach(u=>{r[u]=!0})};return re(i)?s(i):s(String(i).split(e)),r},sn=()=>{},on=(i,e)=>i!=null&&Number.isFinite(i=+i)?i:e;function an(i){return!!(i&&q(i.append)&&i[Symbol.toStringTag]==="FormData"&&i[Symbol.iterator])}const cn=i=>{const e=new Array(10),r=(s,o)=>{if(Te(s)){if(e.indexOf(s)>=0)return;if(!("toJSON"in s)){e[o]=s;const u=re(s)?[]:{};return le(s,(l,a)=>{const d=r(l,o+1);!ue(d)&&(u[a]=d)}),e[o]=void 0,u}}return s};return r(i,0)},un=W("AsyncFunction"),ln=i=>i&&(Te(i)||q(i))&&q(i.then)&&q(i.catch),At=((i,e)=>i?setImmediate:e?((r,s)=>(Y.addEventListener("message",({source:o,data:u})=>{o===Y&&u===r&&s.length&&s.shift()()},!1),o=>{s.push(o),Y.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",q(Y.postMessage)),hn=typeof queueMicrotask<"u"?queueMicrotask.bind(Y):typeof process<"u"&&process.nextTick||At,w={isArray:re,isArrayBuffer:xt,isBuffer:_i,isFormData:Pi,isArrayBufferView:Ui,isString:$i,isNumber:Bt,isBoolean:Ci,isObject:Te,isPlainObject:we,isReadableStream:ji,isRequest:Di,isResponse:Hi,isHeaders:qi,isUndefined:ue,isDate:Fi,isFile:Oi,isBlob:Ni,isRegExp:tn,isFunction:q,isStream:ki,isURLSearchParams:Li,isTypedArray:Xi,isFileList:Mi,forEach:le,merge:Le,extend:Ki,trim:zi,stripBOM:Wi,inherits:Ji,toFlatObject:Vi,kindOf:Se,kindOfTest:W,endsWith:Gi,toArray:vi,forEachEntry:Yi,matchAll:Qi,isHTMLForm:Zi,hasOwnProperty:ct,hasOwnProp:ct,reduceDescriptors:Tt,freezeMethods:nn,toObjectSet:rn,toCamelCase:en,noop:sn,toFiniteNumber:on,findKey:St,global:Y,isContextDefined:Rt,isSpecCompliantForm:an,toJSONObject:cn,isAsyncFn:un,isThenable:ln,setImmediate:At,asap:hn};function R(i,e,r,s,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),s&&(this.request=s),o&&(this.response=o,this.status=o.status?o.status:null)}w.inherits(R,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:w.toJSONObject(this.config),code:this.code,status:this.status}}});const _t=R.prototype,Ut={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{Ut[i]={value:i}});Object.defineProperties(R,Ut);Object.defineProperty(_t,"isAxiosError",{value:!0});R.from=(i,e,r,s,o,u)=>{const l=Object.create(_t);return w.toFlatObject(i,l,function(d){return d!==Error.prototype},a=>a!=="isAxiosError"),R.call(l,i.message,e,r,s,o),l.cause=i,l.name=i.name,u&&Object.assign(l,u),l};const fn=null;function je(i){return w.isPlainObject(i)||w.isArray(i)}function $t(i){return w.endsWith(i,"[]")?i.slice(0,-2):i}function ut(i,e,r){return i?i.concat(e).map(function(o,u){return o=$t(o),!r&&u?"["+o+"]":o}).join(r?".":""):e}function dn(i){return w.isArray(i)&&!i.some(je)}const pn=w.toFlatObject(w,{},null,function(e){return/^is[A-Z]/.test(e)});function Ae(i,e,r){if(!w.isObject(i))throw new TypeError("target must be an object");e=e||new FormData,r=w.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,B){return!w.isUndefined(B[x])});const s=r.metaTokens,o=r.visitor||p,u=r.dots,l=r.indexes,d=(r.Blob||typeof Blob<"u"&&Blob)&&w.isSpecCompliantForm(e);if(!w.isFunction(o))throw new TypeError("visitor must be a function");function m(b){if(b===null)return"";if(w.isDate(b))return b.toISOString();if(!d&&w.isBlob(b))throw new R("Blob is not supported. Use a Buffer instead.");return w.isArrayBuffer(b)||w.isTypedArray(b)?d&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function p(b,x,B){let A=b;if(b&&!B&&typeof b=="object"){if(w.endsWith(x,"{}"))x=s?x:x.slice(0,-2),b=JSON.stringify(b);else if(w.isArray(b)&&dn(b)||(w.isFileList(b)||w.endsWith(x,"[]"))&&(A=w.toArray(b)))return x=$t(x),A.forEach(function($,P){!(w.isUndefined($)||$===null)&&e.append(l===!0?ut([x],P,u):l===null?x:x+"[]",m($))}),!1}return je(b)?!0:(e.append(ut(B,x,u),m(b)),!1)}const E=[],S=Object.assign(pn,{defaultVisitor:p,convertValue:m,isVisitable:je});function I(b,x){if(!w.isUndefined(b)){if(E.indexOf(b)!==-1)throw Error("Circular reference detected in "+x.join("."));E.push(b),w.forEach(b,function(A,T){(!(w.isUndefined(A)||A===null)&&o.call(e,A,w.isString(T)?T.trim():T,x,S))===!0&&I(A,x?x.concat(T):[T])}),E.pop()}}if(!w.isObject(i))throw new TypeError("data must be an object");return I(i),e}function lt(i){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function We(i,e){this._pairs=[],i&&Ae(i,this,e)}const Ct=We.prototype;Ct.append=function(e,r){this._pairs.push([e,r])};Ct.toString=function(e){const r=e?function(s){return e.call(this,s,lt)}:lt;return this._pairs.map(function(o){return r(o[0])+"="+r(o[1])},"").join("&")};function mn(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ft(i,e,r){if(!e)return i;const s=r&&r.encode||mn;w.isFunction(r)&&(r={serialize:r});const o=r&&r.serialize;let u;if(o?u=o(e,r):u=w.isURLSearchParams(e)?e.toString():new We(e,r).toString(s),u){const l=i.indexOf("#");l!==-1&&(i=i.slice(0,l)),i+=(i.indexOf("?")===-1?"?":"&")+u}return i}class ht{constructor(){this.handlers=[]}use(e,r,s){return this.handlers.push({fulfilled:e,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){w.forEach(this.handlers,function(s){s!==null&&e(s)})}}const Ot={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},yn=typeof URLSearchParams<"u"?URLSearchParams:We,wn=typeof FormData<"u"?FormData:null,gn=typeof Blob<"u"?Blob:null,En={isBrowser:!0,classes:{URLSearchParams:yn,FormData:wn,Blob:gn},protocols:["http","https","file","blob","url","data"]},Je=typeof window<"u"&&typeof document<"u",De=typeof navigator=="object"&&navigator||void 0,bn=Je&&(!De||["ReactNative","NativeScript","NS"].indexOf(De.product)<0),In=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",xn=Je&&window.location.href||"http://localhost",Bn=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Je,hasStandardBrowserEnv:bn,hasStandardBrowserWebWorkerEnv:In,navigator:De,origin:xn},Symbol.toStringTag,{value:"Module"})),j={...Bn,...En};function Sn(i,e){return Ae(i,new j.classes.URLSearchParams,Object.assign({visitor:function(r,s,o,u){return j.isNode&&w.isBuffer(r)?(this.append(s,r.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)}},e))}function Rn(i){return w.matchAll(/\w+|\[(\w*)]/g,i).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Tn(i){const e={},r=Object.keys(i);let s;const o=r.length;let u;for(s=0;s<o;s++)u=r[s],e[u]=i[u];return e}function Nt(i){function e(r,s,o,u){let l=r[u++];if(l==="__proto__")return!0;const a=Number.isFinite(+l),d=u>=r.length;return l=!l&&w.isArray(o)?o.length:l,d?(w.hasOwnProp(o,l)?o[l]=[o[l],s]:o[l]=s,!a):((!o[l]||!w.isObject(o[l]))&&(o[l]=[]),e(r,s,o[l],u)&&w.isArray(o[l])&&(o[l]=Tn(o[l])),!a)}if(w.isFormData(i)&&w.isFunction(i.entries)){const r={};return w.forEachEntry(i,(s,o)=>{e(Rn(s),o,r,0)}),r}return null}function An(i,e,r){if(w.isString(i))try{return(e||JSON.parse)(i),w.trim(i)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(i)}const he={transitional:Ot,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const s=r.getContentType()||"",o=s.indexOf("application/json")>-1,u=w.isObject(e);if(u&&w.isHTMLForm(e)&&(e=new FormData(e)),w.isFormData(e))return o?JSON.stringify(Nt(e)):e;if(w.isArrayBuffer(e)||w.isBuffer(e)||w.isStream(e)||w.isFile(e)||w.isBlob(e)||w.isReadableStream(e))return e;if(w.isArrayBufferView(e))return e.buffer;if(w.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(u){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Sn(e,this.formSerializer).toString();if((a=w.isFileList(e))||s.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return Ae(a?{"files[]":e}:e,d&&new d,this.formSerializer)}}return u||o?(r.setContentType("application/json",!1),An(e)):e}],transformResponse:[function(e){const r=this.transitional||he.transitional,s=r&&r.forcedJSONParsing,o=this.responseType==="json";if(w.isResponse(e)||w.isReadableStream(e))return e;if(e&&w.isString(e)&&(s&&!this.responseType||o)){const l=!(r&&r.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(a){if(l)throw a.name==="SyntaxError"?R.from(a,R.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:j.classes.FormData,Blob:j.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};w.forEach(["delete","get","head","post","put","patch"],i=>{he.headers[i]={}});const _n=w.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Un=i=>{const e={};let r,s,o;return i&&i.split(`
`).forEach(function(l){o=l.indexOf(":"),r=l.substring(0,o).trim().toLowerCase(),s=l.substring(o+1).trim(),!(!r||e[r]&&_n[r])&&(r==="set-cookie"?e[r]?e[r].push(s):e[r]=[s]:e[r]=e[r]?e[r]+", "+s:s)}),e},ft=Symbol("internals");function ce(i){return i&&String(i).trim().toLowerCase()}function ge(i){return i===!1||i==null?i:w.isArray(i)?i.map(ge):String(i)}function $n(i){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(i);)e[s[1]]=s[2];return e}const Cn=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function Ne(i,e,r,s,o){if(w.isFunction(s))return s.call(this,e,r);if(o&&(e=r),!!w.isString(e)){if(w.isString(s))return e.indexOf(s)!==-1;if(w.isRegExp(s))return s.test(e)}}function Fn(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,s)=>r.toUpperCase()+s)}function On(i,e){const r=w.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(i,s+r,{value:function(o,u,l){return this[s].call(this,e,o,u,l)},configurable:!0})})}let H=class{constructor(e){e&&this.set(e)}set(e,r,s){const o=this;function u(a,d,m){const p=ce(d);if(!p)throw new Error("header name must be a non-empty string");const E=w.findKey(o,p);(!E||o[E]===void 0||m===!0||m===void 0&&o[E]!==!1)&&(o[E||d]=ge(a))}const l=(a,d)=>w.forEach(a,(m,p)=>u(m,p,d));if(w.isPlainObject(e)||e instanceof this.constructor)l(e,r);else if(w.isString(e)&&(e=e.trim())&&!Cn(e))l(Un(e),r);else if(w.isHeaders(e))for(const[a,d]of e.entries())u(d,a,s);else e!=null&&u(r,e,s);return this}get(e,r){if(e=ce(e),e){const s=w.findKey(this,e);if(s){const o=this[s];if(!r)return o;if(r===!0)return $n(o);if(w.isFunction(r))return r.call(this,o,s);if(w.isRegExp(r))return r.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=ce(e),e){const s=w.findKey(this,e);return!!(s&&this[s]!==void 0&&(!r||Ne(this,this[s],s,r)))}return!1}delete(e,r){const s=this;let o=!1;function u(l){if(l=ce(l),l){const a=w.findKey(s,l);a&&(!r||Ne(s,s[a],a,r))&&(delete s[a],o=!0)}}return w.isArray(e)?e.forEach(u):u(e),o}clear(e){const r=Object.keys(this);let s=r.length,o=!1;for(;s--;){const u=r[s];(!e||Ne(this,this[u],u,e,!0))&&(delete this[u],o=!0)}return o}normalize(e){const r=this,s={};return w.forEach(this,(o,u)=>{const l=w.findKey(s,u);if(l){r[l]=ge(o),delete r[u];return}const a=e?Fn(u):String(u).trim();a!==u&&delete r[u],r[a]=ge(o),s[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return w.forEach(this,(s,o)=>{s!=null&&s!==!1&&(r[o]=e&&w.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const s=new this(e);return r.forEach(o=>s.set(o)),s}static accessor(e){const s=(this[ft]=this[ft]={accessors:{}}).accessors,o=this.prototype;function u(l){const a=ce(l);s[a]||(On(o,l),s[a]=!0)}return w.isArray(e)?e.forEach(u):u(e),this}};H.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);w.reduceDescriptors(H.prototype,({value:i},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>i,set(s){this[r]=s}}});w.freezeMethods(H);function Me(i,e){const r=this||he,s=e||r,o=H.from(s.headers);let u=s.data;return w.forEach(i,function(a){u=a.call(r,u,o.normalize(),e?e.status:void 0)}),o.normalize(),u}function Mt(i){return!!(i&&i.__CANCEL__)}function se(i,e,r){R.call(this,i??"canceled",R.ERR_CANCELED,e,r),this.name="CanceledError"}w.inherits(se,R,{__CANCEL__:!0});function kt(i,e,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?i(r):e(new R("Request failed with status code "+r.status,[R.ERR_BAD_REQUEST,R.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Nn(i){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return e&&e[1]||""}function Mn(i,e){i=i||10;const r=new Array(i),s=new Array(i);let o=0,u=0,l;return e=e!==void 0?e:1e3,function(d){const m=Date.now(),p=s[u];l||(l=m),r[o]=d,s[o]=m;let E=u,S=0;for(;E!==o;)S+=r[E++],E=E%i;if(o=(o+1)%i,o===u&&(u=(u+1)%i),m-l<e)return;const I=p&&m-p;return I?Math.round(S*1e3/I):void 0}}function kn(i,e){let r=0,s=1e3/e,o,u;const l=(m,p=Date.now())=>{r=p,o=null,u&&(clearTimeout(u),u=null),i.apply(null,m)};return[(...m)=>{const p=Date.now(),E=p-r;E>=s?l(m,p):(o=m,u||(u=setTimeout(()=>{u=null,l(o)},s-E)))},()=>o&&l(o)]}const xe=(i,e,r=3)=>{let s=0;const o=Mn(50,250);return kn(u=>{const l=u.loaded,a=u.lengthComputable?u.total:void 0,d=l-s,m=o(d),p=l<=a;s=l;const E={loaded:l,total:a,progress:a?l/a:void 0,bytes:d,rate:m||void 0,estimated:m&&a&&p?(a-l)/m:void 0,event:u,lengthComputable:a!=null,[e?"download":"upload"]:!0};i(E)},r)},dt=(i,e)=>{const r=i!=null;return[s=>e[0]({lengthComputable:r,total:i,loaded:s}),e[1]]},pt=i=>(...e)=>w.asap(()=>i(...e)),Pn=j.hasStandardBrowserEnv?((i,e)=>r=>(r=new URL(r,j.origin),i.protocol===r.protocol&&i.host===r.host&&(e||i.port===r.port)))(new URL(j.origin),j.navigator&&/(msie|trident)/i.test(j.navigator.userAgent)):()=>!0,Ln=j.hasStandardBrowserEnv?{write(i,e,r,s,o,u){const l=[i+"="+encodeURIComponent(e)];w.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),w.isString(s)&&l.push("path="+s),w.isString(o)&&l.push("domain="+o),u===!0&&l.push("secure"),document.cookie=l.join("; ")},read(i){const e=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(i){this.write(i,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function jn(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function Dn(i,e){return e?i.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):i}function Pt(i,e,r){let s=!jn(e);return i&&(s||r==!1)?Dn(i,e):e}const mt=i=>i instanceof H?{...i}:i;function Z(i,e){e=e||{};const r={};function s(m,p,E,S){return w.isPlainObject(m)&&w.isPlainObject(p)?w.merge.call({caseless:S},m,p):w.isPlainObject(p)?w.merge({},p):w.isArray(p)?p.slice():p}function o(m,p,E,S){if(w.isUndefined(p)){if(!w.isUndefined(m))return s(void 0,m,E,S)}else return s(m,p,E,S)}function u(m,p){if(!w.isUndefined(p))return s(void 0,p)}function l(m,p){if(w.isUndefined(p)){if(!w.isUndefined(m))return s(void 0,m)}else return s(void 0,p)}function a(m,p,E){if(E in e)return s(m,p);if(E in i)return s(void 0,m)}const d={url:u,method:u,data:u,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:a,headers:(m,p,E)=>o(mt(m),mt(p),E,!0)};return w.forEach(Object.keys(Object.assign({},i,e)),function(p){const E=d[p]||o,S=E(i[p],e[p],p);w.isUndefined(S)&&E!==a||(r[p]=S)}),r}const Lt=i=>{const e=Z({},i);let{data:r,withXSRFToken:s,xsrfHeaderName:o,xsrfCookieName:u,headers:l,auth:a}=e;e.headers=l=H.from(l),e.url=Ft(Pt(e.baseURL,e.url,e.allowAbsoluteUrls),i.params,i.paramsSerializer),a&&l.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let d;if(w.isFormData(r)){if(j.hasStandardBrowserEnv||j.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((d=l.getContentType())!==!1){const[m,...p]=d?d.split(";").map(E=>E.trim()).filter(Boolean):[];l.setContentType([m||"multipart/form-data",...p].join("; "))}}if(j.hasStandardBrowserEnv&&(s&&w.isFunction(s)&&(s=s(e)),s||s!==!1&&Pn(e.url))){const m=o&&u&&Ln.read(u);m&&l.set(o,m)}return e},Hn=typeof XMLHttpRequest<"u",qn=Hn&&function(i){return new Promise(function(r,s){const o=Lt(i);let u=o.data;const l=H.from(o.headers).normalize();let{responseType:a,onUploadProgress:d,onDownloadProgress:m}=o,p,E,S,I,b;function x(){I&&I(),b&&b(),o.cancelToken&&o.cancelToken.unsubscribe(p),o.signal&&o.signal.removeEventListener("abort",p)}let B=new XMLHttpRequest;B.open(o.method.toUpperCase(),o.url,!0),B.timeout=o.timeout;function A(){if(!B)return;const $=H.from("getAllResponseHeaders"in B&&B.getAllResponseHeaders()),U={data:!a||a==="text"||a==="json"?B.responseText:B.response,status:B.status,statusText:B.statusText,headers:$,config:i,request:B};kt(function(J){r(J),x()},function(J){s(J),x()},U),B=null}"onloadend"in B?B.onloadend=A:B.onreadystatechange=function(){!B||B.readyState!==4||B.status===0&&!(B.responseURL&&B.responseURL.indexOf("file:")===0)||setTimeout(A)},B.onabort=function(){B&&(s(new R("Request aborted",R.ECONNABORTED,i,B)),B=null)},B.onerror=function(){s(new R("Network Error",R.ERR_NETWORK,i,B)),B=null},B.ontimeout=function(){let P=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const U=o.transitional||Ot;o.timeoutErrorMessage&&(P=o.timeoutErrorMessage),s(new R(P,U.clarifyTimeoutError?R.ETIMEDOUT:R.ECONNABORTED,i,B)),B=null},u===void 0&&l.setContentType(null),"setRequestHeader"in B&&w.forEach(l.toJSON(),function(P,U){B.setRequestHeader(U,P)}),w.isUndefined(o.withCredentials)||(B.withCredentials=!!o.withCredentials),a&&a!=="json"&&(B.responseType=o.responseType),m&&([S,b]=xe(m,!0),B.addEventListener("progress",S)),d&&B.upload&&([E,I]=xe(d),B.upload.addEventListener("progress",E),B.upload.addEventListener("loadend",I)),(o.cancelToken||o.signal)&&(p=$=>{B&&(s(!$||$.type?new se(null,i,B):$),B.abort(),B=null)},o.cancelToken&&o.cancelToken.subscribe(p),o.signal&&(o.signal.aborted?p():o.signal.addEventListener("abort",p)));const T=Nn(o.url);if(T&&j.protocols.indexOf(T)===-1){s(new R("Unsupported protocol "+T+":",R.ERR_BAD_REQUEST,i));return}B.send(u||null)})},zn=(i,e)=>{const{length:r}=i=i?i.filter(Boolean):[];if(e||r){let s=new AbortController,o;const u=function(m){if(!o){o=!0,a();const p=m instanceof Error?m:this.reason;s.abort(p instanceof R?p:new se(p instanceof Error?p.message:p))}};let l=e&&setTimeout(()=>{l=null,u(new R(`timeout ${e} of ms exceeded`,R.ETIMEDOUT))},e);const a=()=>{i&&(l&&clearTimeout(l),l=null,i.forEach(m=>{m.unsubscribe?m.unsubscribe(u):m.removeEventListener("abort",u)}),i=null)};i.forEach(m=>m.addEventListener("abort",u));const{signal:d}=s;return d.unsubscribe=()=>w.asap(a),d}},Kn=function*(i,e){let r=i.byteLength;if(r<e){yield i;return}let s=0,o;for(;s<r;)o=s+e,yield i.slice(s,o),s=o},Wn=async function*(i,e){for await(const r of Jn(i))yield*Kn(r,e)},Jn=async function*(i){if(i[Symbol.asyncIterator]){yield*i;return}const e=i.getReader();try{for(;;){const{done:r,value:s}=await e.read();if(r)break;yield s}}finally{await e.cancel()}},yt=(i,e,r,s)=>{const o=Wn(i,e);let u=0,l,a=d=>{l||(l=!0,s&&s(d))};return new ReadableStream({async pull(d){try{const{done:m,value:p}=await o.next();if(m){a(),d.close();return}let E=p.byteLength;if(r){let S=u+=E;r(S)}d.enqueue(new Uint8Array(p))}catch(m){throw a(m),m}},cancel(d){return a(d),o.return()}},{highWaterMark:2})},_e=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",jt=_e&&typeof ReadableStream=="function",Vn=_e&&(typeof TextEncoder=="function"?(i=>e=>i.encode(e))(new TextEncoder):async i=>new Uint8Array(await new Response(i).arrayBuffer())),Dt=(i,...e)=>{try{return!!i(...e)}catch{return!1}},Gn=jt&&Dt(()=>{let i=!1;const e=new Request(j.origin,{body:new ReadableStream,method:"POST",get duplex(){return i=!0,"half"}}).headers.has("Content-Type");return i&&!e}),wt=64*1024,He=jt&&Dt(()=>w.isReadableStream(new Response("").body)),Be={stream:He&&(i=>i.body)};_e&&(i=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Be[e]&&(Be[e]=w.isFunction(i[e])?r=>r[e]():(r,s)=>{throw new R(`Response type '${e}' is not supported`,R.ERR_NOT_SUPPORT,s)})})})(new Response);const vn=async i=>{if(i==null)return 0;if(w.isBlob(i))return i.size;if(w.isSpecCompliantForm(i))return(await new Request(j.origin,{method:"POST",body:i}).arrayBuffer()).byteLength;if(w.isArrayBufferView(i)||w.isArrayBuffer(i))return i.byteLength;if(w.isURLSearchParams(i)&&(i=i+""),w.isString(i))return(await Vn(i)).byteLength},Xn=async(i,e)=>{const r=w.toFiniteNumber(i.getContentLength());return r??vn(e)},Yn=_e&&(async i=>{let{url:e,method:r,data:s,signal:o,cancelToken:u,timeout:l,onDownloadProgress:a,onUploadProgress:d,responseType:m,headers:p,withCredentials:E="same-origin",fetchOptions:S}=Lt(i);m=m?(m+"").toLowerCase():"text";let I=zn([o,u&&u.toAbortSignal()],l),b;const x=I&&I.unsubscribe&&(()=>{I.unsubscribe()});let B;try{if(d&&Gn&&r!=="get"&&r!=="head"&&(B=await Xn(p,s))!==0){let U=new Request(e,{method:"POST",body:s,duplex:"half"}),z;if(w.isFormData(s)&&(z=U.headers.get("content-type"))&&p.setContentType(z),U.body){const[J,ee]=dt(B,xe(pt(d)));s=yt(U.body,wt,J,ee)}}w.isString(E)||(E=E?"include":"omit");const A="credentials"in Request.prototype;b=new Request(e,{...S,signal:I,method:r.toUpperCase(),headers:p.normalize().toJSON(),body:s,duplex:"half",credentials:A?E:void 0});let T=await fetch(b);const $=He&&(m==="stream"||m==="response");if(He&&(a||$&&x)){const U={};["status","statusText","headers"].forEach(fe=>{U[fe]=T[fe]});const z=w.toFiniteNumber(T.headers.get("content-length")),[J,ee]=a&&dt(z,xe(pt(a),!0))||[];T=new Response(yt(T.body,wt,J,()=>{ee&&ee(),x&&x()}),U)}m=m||"text";let P=await Be[w.findKey(Be,m)||"text"](T,i);return!$&&x&&x(),await new Promise((U,z)=>{kt(U,z,{data:P,headers:H.from(T.headers),status:T.status,statusText:T.statusText,config:i,request:b})})}catch(A){throw x&&x(),A&&A.name==="TypeError"&&/fetch/i.test(A.message)?Object.assign(new R("Network Error",R.ERR_NETWORK,i,b),{cause:A.cause||A}):R.from(A,A&&A.code,i,b)}}),qe={http:fn,xhr:qn,fetch:Yn};w.forEach(qe,(i,e)=>{if(i){try{Object.defineProperty(i,"name",{value:e})}catch{}Object.defineProperty(i,"adapterName",{value:e})}});const gt=i=>`- ${i}`,Qn=i=>w.isFunction(i)||i===null||i===!1,Ht={getAdapter:i=>{i=w.isArray(i)?i:[i];const{length:e}=i;let r,s;const o={};for(let u=0;u<e;u++){r=i[u];let l;if(s=r,!Qn(r)&&(s=qe[(l=String(r)).toLowerCase()],s===void 0))throw new R(`Unknown adapter '${l}'`);if(s)break;o[l||"#"+u]=s}if(!s){const u=Object.entries(o).map(([a,d])=>`adapter ${a} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=e?u.length>1?`since :
`+u.map(gt).join(`
`):" "+gt(u[0]):"as no adapter specified";throw new R("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return s},adapters:qe};function ke(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new se(null,i)}function Et(i){return ke(i),i.headers=H.from(i.headers),i.data=Me.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),Ht.getAdapter(i.adapter||he.adapter)(i).then(function(s){return ke(i),s.data=Me.call(i,i.transformResponse,s),s.headers=H.from(s.headers),s},function(s){return Mt(s)||(ke(i),s&&s.response&&(s.response.data=Me.call(i,i.transformResponse,s.response),s.response.headers=H.from(s.response.headers))),Promise.reject(s)})}const qt="1.8.4",Ue={};["object","boolean","number","function","string","symbol"].forEach((i,e)=>{Ue[i]=function(s){return typeof s===i||"a"+(e<1?"n ":" ")+i}});const bt={};Ue.transitional=function(e,r,s){function o(u,l){return"[Axios v"+qt+"] Transitional option '"+u+"'"+l+(s?". "+s:"")}return(u,l,a)=>{if(e===!1)throw new R(o(l," has been removed"+(r?" in "+r:"")),R.ERR_DEPRECATED);return r&&!bt[l]&&(bt[l]=!0,console.warn(o(l," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(u,l,a):!0}};Ue.spelling=function(e){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function Zn(i,e,r){if(typeof i!="object")throw new R("options must be an object",R.ERR_BAD_OPTION_VALUE);const s=Object.keys(i);let o=s.length;for(;o-- >0;){const u=s[o],l=e[u];if(l){const a=i[u],d=a===void 0||l(a,u,i);if(d!==!0)throw new R("option "+u+" must be "+d,R.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new R("Unknown option "+u,R.ERR_BAD_OPTION)}}const Ee={assertOptions:Zn,validators:Ue},G=Ee.validators;let Q=class{constructor(e){this.defaults=e,this.interceptors={request:new ht,response:new ht}}async request(e,r){try{return await this._request(e,r)}catch(s){if(s instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const u=o.stack?o.stack.replace(/^.+\n/,""):"";try{s.stack?u&&!String(s.stack).endsWith(u.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+u):s.stack=u}catch{}}throw s}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Z(this.defaults,r);const{transitional:s,paramsSerializer:o,headers:u}=r;s!==void 0&&Ee.assertOptions(s,{silentJSONParsing:G.transitional(G.boolean),forcedJSONParsing:G.transitional(G.boolean),clarifyTimeoutError:G.transitional(G.boolean)},!1),o!=null&&(w.isFunction(o)?r.paramsSerializer={serialize:o}:Ee.assertOptions(o,{encode:G.function,serialize:G.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Ee.assertOptions(r,{baseUrl:G.spelling("baseURL"),withXsrfToken:G.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=u&&w.merge(u.common,u[r.method]);u&&w.forEach(["delete","get","head","post","put","patch","common"],b=>{delete u[b]}),r.headers=H.concat(l,u);const a=[];let d=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(r)===!1||(d=d&&x.synchronous,a.unshift(x.fulfilled,x.rejected))});const m=[];this.interceptors.response.forEach(function(x){m.push(x.fulfilled,x.rejected)});let p,E=0,S;if(!d){const b=[Et.bind(this),void 0];for(b.unshift.apply(b,a),b.push.apply(b,m),S=b.length,p=Promise.resolve(r);E<S;)p=p.then(b[E++],b[E++]);return p}S=a.length;let I=r;for(E=0;E<S;){const b=a[E++],x=a[E++];try{I=b(I)}catch(B){x.call(this,B);break}}try{p=Et.call(this,I)}catch(b){return Promise.reject(b)}for(E=0,S=m.length;E<S;)p=p.then(m[E++],m[E++]);return p}getUri(e){e=Z(this.defaults,e);const r=Pt(e.baseURL,e.url,e.allowAbsoluteUrls);return Ft(r,e.params,e.paramsSerializer)}};w.forEach(["delete","get","head","options"],function(e){Q.prototype[e]=function(r,s){return this.request(Z(s||{},{method:e,url:r,data:(s||{}).data}))}});w.forEach(["post","put","patch"],function(e){function r(s){return function(u,l,a){return this.request(Z(a||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:u,data:l}))}}Q.prototype[e]=r(),Q.prototype[e+"Form"]=r(!0)});let er=class zt{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(u){r=u});const s=this;this.promise.then(o=>{if(!s._listeners)return;let u=s._listeners.length;for(;u-- >0;)s._listeners[u](o);s._listeners=null}),this.promise.then=o=>{let u;const l=new Promise(a=>{s.subscribe(a),u=a}).then(o);return l.cancel=function(){s.unsubscribe(u)},l},e(function(u,l,a){s.reason||(s.reason=new se(u,l,a),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=s=>{e.abort(s)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new zt(function(o){e=o}),cancel:e}}};function tr(i){return function(r){return i.apply(null,r)}}function ir(i){return w.isObject(i)&&i.isAxiosError===!0}const ze={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ze).forEach(([i,e])=>{ze[e]=i});function Kt(i){const e=new Q(i),r=It(Q.prototype.request,e);return w.extend(r,Q.prototype,e,{allOwnKeys:!0}),w.extend(r,e,null,{allOwnKeys:!0}),r.create=function(o){return Kt(Z(i,o))},r}const M=Kt(he);M.Axios=Q;M.CanceledError=se;M.CancelToken=er;M.isCancel=Mt;M.VERSION=qt;M.toFormData=Ae;M.AxiosError=R;M.Cancel=M.CanceledError;M.all=function(e){return Promise.all(e)};M.spread=tr;M.isAxiosError=ir;M.mergeConfig=Z;M.AxiosHeaders=H;M.formToJSON=i=>Nt(w.isHTMLForm(i)?new FormData(i):i);M.getAdapter=Ht.getAdapter;M.HttpStatusCode=ze;M.default=M;const{Axios:ur,AxiosError:lr,CanceledError:hr,isCancel:fr,CancelToken:dr,VERSION:pr,all:mr,Cancel:yr,isAxiosError:wr,spread:gr,toFormData:Er,AxiosHeaders:br,HttpStatusCode:Ir,formToJSON:xr,getAdapter:Br,mergeConfig:Sr}=M;class nr{constructor(e,r,s,o){this.orgId=e,this.instanceId=r,this.apiKeyInfo=s,this.cmsOrigin="https://app.thebcms.com",this.useMemCache=!1,this.debug=!1,this.enableSocket=!1,this.injectSvg=!1,o&&(o.cmsOrigin&&(this.cmsOrigin=o.cmsOrigin),o.useMemCache&&(this.useMemCache=o.useMemCache),o.debug&&(this.debug=o.debug),o.enableSocket&&(this.enableSocket=o.enableSocket),o.injectSvg&&(this.injectSvg=o.injectSvg)),this.socket=new xi(this),this.template=new Bi(this),this.typeGenerator=new Si(this),this.entry=new hi(this),this.entryStatus=new fi(this),this.group=new di(this),this.language=new pi(this),this.media=new mi(this),this.widget=new Ri(this)}getConfig(){return{apiKey:this.apiKeyInfo,cmsOrigin:this.cmsOrigin,debug:this.debug,enableSocket:this.enableSocket,injectSvg:this.injectSvg,instanceId:this.instanceId,orgId:this.orgId,useMemCache:this.useMemCache}}async send(e){return e.headers||(e.headers={}),e.headers.Authorization=`ApiKey ${this.apiKeyInfo.id}.${this.apiKeyInfo.secret}`,e.url=`${e.url&&e.url.startsWith("http")?"":this.cmsOrigin}${e.url}`.replace(":instanceId",this.instanceId).replace(":orgId",this.orgId),e.timeout||(e.timeout=6e4),(await M(e)).data}}const rr=["IMG","SVG","GIF"],Rr=i=>{const e=new nr(i.clientConfig.orgId,i.clientConfig.instanceId,i.clientConfig.apiKey,{cmsOrigin:i.clientConfig.cmsOrigin,useMemCache:i.clientConfig.useMemCache,injectSvg:i.clientConfig.injectSvg,debug:i.clientConfig.debug,enableSocket:i.clientConfig.enableSocket}),r=K.useRef(null),s=K.useMemo(()=>new Ti(e,i.media,i.sizeTransform),[i.media,e,i.sizeTransform]),[o,u]=K.useState(s.getPictureSrcSet(0)),l=i.media;if(K.useEffect(()=>{let a;function d(){clearTimeout(a),a=setTimeout(()=>{r.current&&u(s.getPictureSrcSet(r.current.offsetWidth))})}return d(),s.parsable&&window.addEventListener("resize",d),()=>{s.parsable&&window.removeEventListener("resize",d)}},[i.media]),e.injectSvg&&l.svg)return K.createElement("div",{id:i.id,style:i.style,className:i.className,dangerouslySetInnerHTML:{__html:l.svg}});if(!rr.includes(i.media.type)){const a=`Media of type ${i.media.type} cannot be used as image`;return console.warn(a),K.createElement("div",{"data-bcms-image-error":a,style:{display:"none"}})}return s.parsable?K.createElement("picture",null,K.createElement("source",{srcSet:o.src1,type:"image/webp"}),K.createElement("source",{srcSet:o.src2,type:i.media.mimetype}),K.createElement("img",{ref:r,id:i.id,style:i.style?i.style:i.className?{}:{width:"100%"},className:i.className,src:o.original,alt:i.altText||i.media.alt_text||i.media.altText||i.media.name,width:o.width,height:o.height})):K.createElement("img",{id:i.id,style:i.style,className:i.className,src:o.original,alt:i.altText||i.media.alt_text||i.media.altText||i.media.name,width:i.media.width,height:i.media.height})};export{Rr as BCMSImage};
