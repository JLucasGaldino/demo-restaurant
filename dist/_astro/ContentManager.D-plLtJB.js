import{j as c}from"./jsx-runtime.D_zvdyIk.js";import{R as t,r as d}from"./index.6otl1p8d.js";import{BCMSImage as f}from"./components-react.BohhgXdD.js";const g=e=>{if(e.item.widgetName&&e.item.type==="widget")if(e.components&&e.components[e.item.widgetName]){const i=e.components[e.item.widgetName];return t.createElement(i,{data:e.item.value})}else return t.createElement("div",{style:{display:"none"},"data-bcms-widget-error":`Widget ${e.item.widgetName} is not handled`},"Widget ",e.item.widgetName," is not handled");else if(e.item.type==="media"){if(!e.clientConfig||!e.item.value)return t.createElement("div",{style:{display:"none"}},"Cannot mount media because BCMS Client Config was not provided to the component");const i=e.item.value;return typeof i!="object"?t.createElement("div",{style:{display:"none"}},"Node value is not a media"):i.type!=="IMG"?e.nodeParser?e.nodeParser(e.item):t.createElement("div",{style:{display:"none"}},"Media is not of type Image and cannot be handler automatically, please provide a node parser if you want to render this node"):t.createElement(f,{media:e.item.value,clientConfig:e.clientConfig})}let n="";return e.nodeParser?n=e.nodeParser(e.item):n=e.item.value,typeof n=="object"?t.createElement(t.Fragment,null,n):t.createElement("div",{className:`bcms-content--primitive bcms-content--${e.item.type}`,dangerouslySetInnerHTML:{__html:n}})},y=e=>t.createElement("div",{id:e.id,className:`bcms-content ${e.className||""}`,style:e.style},e.items.map((n,i)=>t.createElement(g,{key:i,item:n,components:e.widgetComponents,nodeParser:e.nodeParser,clientConfig:e.clientConfig}))),h=({items:e,widgetComponents:n,className:i="",parentClassName:o=""})=>{const m=d.useRef(null),s=()=>{m.current&&m.current.querySelectorAll("a").forEach(a=>{const r=a.getAttribute("href");if(r&&r.startsWith("/")){a.target="_self";const l=u=>{u.preventDefault(),window.location.href=r};return a.addEventListener("click",l),()=>{a.removeEventListener("click",l)}}})};return d.useEffect(()=>{s()},[]),c.jsx("div",{ref:m,className:o,children:c.jsx(y,{className:i,items:e,widgetComponents:n||{}})})};export{h as C};
